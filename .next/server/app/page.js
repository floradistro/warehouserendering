(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9496:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>r.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c});var o=i(482),a=i(9108),s=i(2563),r=i.n(s),n=i(8300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);i.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,751)),"/Users/whale/Desktop/WarehouseCAD/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,2917)),"/Users/whale/Desktop/WarehouseCAD/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/whale/Desktop/WarehouseCAD/app/page.tsx"],m="/page",h={require:i,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7341:(e,t,i)=>{Promise.resolve().then(i.bind(i,1733))},3261:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,2583,23)),Promise.resolve().then(i.t.bind(i,6840,23)),Promise.resolve().then(i.t.bind(i,8771,23)),Promise.resolve().then(i.t.bind(i,3225,23)),Promise.resolve().then(i.t.bind(i,9295,23)),Promise.resolve().then(i.t.bind(i,3982,23))},2847:()=>{},1733:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>K});var o,a,s,r,n,l,c,d=i(5344),m=i(3729),h=i.n(m),p=i(3267),u=i.n(p),g={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),y=(e,t)=>{let i=(0,m.forwardRef)(({color:i="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:r="",children:n,...l},c)=>(0,m.createElement)("svg",{ref:c,...g,width:o,height:o,stroke:i,strokeWidth:s?24*Number(a)/Number(o):a,className:["lucide",`lucide-${x(e)}`,r].join(" "),...l},[...t.map(([e,t])=>(0,m.createElement)(e,t)),...Array.isArray(n)?n:[n]]));return i.displayName=`${e}`,i},f=y("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),b=y("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),w=y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_=y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),v=y("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),E=y("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),j=y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function M({children:e,fallback:t=null}){let[i,o]=(0,m.useState)(!1);return((0,m.useEffect)(()=>{o(!0)},[]),i)?d.jsx(d.Fragment,{children:e}):d.jsx(d.Fragment,{children:t})}/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let D=y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),N=y("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),S=y("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),k=y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),z=y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),C=y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),I=y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),P=y("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),T=y("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),R=y("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),A=y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),F=y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),L=e=>{let t;let i=new Set,o=(e,o)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=o?o:"object"!=typeof a||null===a)?a:Object.assign({},t,a),i.forEach(i=>i(t,e))}},a=()=>t,s={setState:o,getState:a,getInitialState:()=>r,subscribe:e=>(i.add(e),()=>i.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},r=t=e(o,a,s);return s},O=e=>e?L(e):L;var $=i(4657);let{useDebugValue:W}=m,{useSyncExternalStoreWithSelector:B}=$,U=!1,q=e=>e,Y=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?O(e):e,i=(e,i)=>(function(e,t=q,i){i&&!U&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),U=!0);let o=B(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,i);return W(o),o})(t,e,i);return Object.assign(i,t),i},X=e=>t=>{try{let i=e(t);if(i instanceof Promise)return i;return{then:e=>X(e)(i),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>X(t)(e)}}};var Z=i(8842),H=i(6639);let V=(n?Y(n):Y)((l=(e,t)=>({messages:[],isProcessing:!1,inputValue:"",currentFloorplan:null,viewMode:"3d",selectedElements:[],measurementMode:!1,selectedObjectsForMeasurement:[null,null],measurementDistance:null,measurementType:"horizontal",cameraPosition:[10,10,10],cameraTarget:[0,0,0],showMeasurements:!1,firstPersonMode:!1,hiddenLayers:new Set,layerGroups:{},availableModels:[],lastError:null,undoRedoStatus:{canUndo:!1,canRedo:!1,undoCount:0,redoCount:0},isPlacing:!1,placementTemplate:null,previewElement:null,placementRotation:0,placementDimensions:{width:20,height:1,depth:12},isRotationLocked:!1,isEditing:!1,editingElement:null,originalEditingElement:null,snapPoints:[],activeSnapPoint:null,showSnapIndicators:!0,snapTolerance:1.2,dragGuides:[],isDragging:!1,dragStartPosition:null,dragCurrentPosition:null,dragOffset:null,clipboard:[],clipboardMode:null,addMessage:t=>e(e=>({messages:[...e.messages,{...t,id:Math.random().toString(36).substr(2,9),timestamp:new Date}]})),setInputValue:t=>e({inputValue:t}),setIsProcessing:t=>e({isProcessing:t}),setCurrentFloorplan:t=>e({currentFloorplan:t}),updateFloorplan:t=>e(e=>({currentFloorplan:e.currentFloorplan?{...e.currentFloorplan,...t,updatedAt:new Date}:null})),setViewMode:t=>e({viewMode:t}),toggleMeasurements:()=>e(e=>({showMeasurements:!e.showMeasurements})),selectObjectForMeasurement:i=>{let{selectedObjectsForMeasurement:o,currentFloorplan:a}=t();if(console.log("\uD83D\uDCCF selectObjectForMeasurement called:",{objectId:i,current:o}),!a)return;let s=a.elements.find(e=>e.id===i);if(s){if(null===o[0])e({selectedObjectsForMeasurement:[i,null],measurementDistance:null}),console.log("✅ First object selected for measurement:",i);else if(null===o[1]&&o[0]!==i){let r=a.elements.find(e=>e.id===o[0]);if(r){let a;let n={minX:r.position.x,maxX:r.position.x+r.dimensions.width,minY:r.position.y,maxY:r.position.y+r.dimensions.height,minZ:r.position.z||0,maxZ:(r.position.z||0)+(r.dimensions.depth||0)},l={minX:s.position.x,maxX:s.position.x+s.dimensions.width,minY:s.position.y,maxY:s.position.y+s.dimensions.height,minZ:s.position.z||0,maxZ:(s.position.z||0)+(s.dimensions.depth||0)},c=Math.max(0,Math.max(n.minX-l.maxX,l.minX-n.maxX)),d=Math.max(0,Math.max(n.minY-l.maxY,l.minY-n.maxY)),m=Math.max(0,Math.max(n.minZ-l.maxZ,l.minZ-n.maxZ));r.position.x,r.dimensions.width,r.position.y,r.dimensions.height,r.position.z,r.dimensions.depth,s.position.x,s.dimensions.width,s.position.y,s.dimensions.height,s.position.z,s.dimensions.depth;let{measurementType:h}=t(),p=Math.max(c,d,m),u=h;p===c&&c>2*d?u="horizontal":p===d&&d>2*c?u="vertical":p===m&&m>1&&(u="height");let g="horizontal"===h&&"horizontal"!==u?u:h;switch(g){case"horizontal":a=c;break;case"vertical":a=d;break;case"height":a=m;break;default:a=Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(m,2))}g!==h&&e({measurementType:g}),e({selectedObjectsForMeasurement:[o[0],i],measurementDistance:a}),console.log("✅ Second object selected, distance calculated:",{distance:a.toFixed(2)+"ft"})}}else e({selectedObjectsForMeasurement:[i,null],measurementDistance:null}),console.log("\uD83D\uDD04 Reset - new first object selected:",i)}},clearMeasurementSelection:()=>e({selectedObjectsForMeasurement:[null,null],measurementDistance:null}),setMeasurementType:i=>{let{selectedObjectsForMeasurement:o,currentFloorplan:a}=t();if(e({measurementType:i}),o[0]&&o[1]&&a){let t=a.elements.find(e=>e.id===o[0]),s=a.elements.find(e=>e.id===o[1]);if(t&&s){let o;let a={minX:t.position.x,maxX:t.position.x+t.dimensions.width,minY:t.position.y,maxY:t.position.y+t.dimensions.height,minZ:t.position.z||0,maxZ:(t.position.z||0)+(t.dimensions.depth||0)},r={minX:s.position.x,maxX:s.position.x+s.dimensions.width,minY:s.position.y,maxY:s.position.y+s.dimensions.height,minZ:s.position.z||0,maxZ:(s.position.z||0)+(s.dimensions.depth||0)},n=Math.max(0,Math.max(a.minX-r.maxX,r.minX-a.maxX)),l=Math.max(0,Math.max(a.minY-r.maxY,r.minY-a.maxY)),c=Math.max(0,Math.max(a.minZ-r.maxZ,r.minZ-a.maxZ));switch(i){case"horizontal":o=n;break;case"vertical":o=l;break;case"height":o=c;break;default:if(0===n||0===l||0===c){let e={x:t.position.x+t.dimensions.width/2,y:t.position.y+t.dimensions.height/2,z:(t.position.z||0)+(t.dimensions.depth||0)/2},i={x:s.position.x+s.dimensions.width/2,y:s.position.y+s.dimensions.height/2,z:(s.position.z||0)+(s.dimensions.depth||0)/2};o=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)+Math.pow(i.z-e.z,2))}else o=Math.sqrt(Math.pow(n,2)+Math.pow(l,2)+Math.pow(c,2))}e({measurementDistance:o}),console.log(`📐 Measurement type changed to ${i}, new distance: ${o.toFixed(2)}ft`)}}},toggleFirstPersonMode:()=>e(e=>({firstPersonMode:!e.firstPersonMode})),loadCurrentModel:()=>{console.log("Store: Loading current model");let i=Z.b.getCurrentModel();console.log("Store: Load current model result",i),i.success&&i.data?(console.log("Store: Setting current floorplan with",i.data.elements.length,"elements"),e({currentFloorplan:i.data,lastError:null}),t().refreshModelList(),t().refreshUndoRedoStatus()):(console.error("Store: Failed to load model",i.error),e({lastError:i.error||"Failed to load model"}))},switchModel:i=>{let o=Z.b.setCurrentModel(i);o.success&&o.data?(e({currentFloorplan:o.data,lastError:null,selectedElements:[],measurementMode:!1,selectedObjectsForMeasurement:[null,null]}),t().refreshUndoRedoStatus()):e({lastError:o.error||"Failed to switch model"})},createNewModel:(i="EMPTY")=>{let o=Z.b.createModel(i);o.success&&o.data?(t().switchModel(o.data.id),t().refreshModelList()):e({lastError:o.error||"Failed to create model"})},deleteModel:i=>{let o=Z.b.deleteModel(i);o.success?(t().refreshModelList(),t().loadCurrentModel()):e({lastError:o.error||"Failed to delete model"})},refreshModelList:()=>{let t=Z.b.listModels();t.success&&t.data&&e({availableModels:t.data})},addElement:i=>{console.log("Store: Adding element",i);let o=Z.b.addElement(i);console.log("Store: Add element result",o),o.success?(console.log("Store: Element added successfully, refreshing model"),t().loadCurrentModel(),t().refreshUndoRedoStatus(),e({lastError:null})):(console.error("Store: Failed to add element",o.error),e({lastError:o.error||"Failed to add element"}))},updateElement:(i,o)=>{let a=Z.b.updateElement(i,o);a.success?(t().loadCurrentModel(),t().refreshUndoRedoStatus(),e({lastError:null})):e({lastError:a.error||"Failed to update element"})},removeElement:i=>{let o=Z.b.removeElement(i);o.success?(t().loadCurrentModel(),t().refreshUndoRedoStatus(),e({lastError:null,selectedElements:t().selectedElements.filter(e=>e!==i)})):e({lastError:o.error||"Failed to remove element"})},duplicateElement:i=>{let o=Z.b.duplicateElement(i);o.success?(t().loadCurrentModel(),t().refreshUndoRedoStatus(),e({lastError:null})):e({lastError:o.error||"Failed to duplicate element"})},undo:()=>{let i=Z.b.undo();i.success&&i.data?(e({currentFloorplan:i.data,lastError:null}),t().refreshUndoRedoStatus()):e({lastError:i.error||"Nothing to undo"})},redo:()=>{let i=Z.b.redo();i.success&&i.data?(e({currentFloorplan:i.data,lastError:null}),t().refreshUndoRedoStatus()):e({lastError:i.error||"Nothing to redo"})},refreshUndoRedoStatus:()=>{e({undoRedoStatus:Z.b.getUndoRedoStatus()})},setError:t=>e({lastError:t}),clearError:()=>e({lastError:null}),startPlacement:t=>{let o=i(6639).ELEMENT_TEMPLATES[t];e({isPlacing:!0,placementTemplate:t,previewElement:null,placementRotation:0,placementDimensions:o?{width:o.defaultDimensions.width,height:o.defaultDimensions.height,depth:o.defaultDimensions.depth||8}:{width:20,height:1,depth:12},isRotationLocked:!1,snapPoints:[],activeSnapPoint:null,measurementMode:!1,selectedElements:[]})},updatePreview:t=>{e({previewElement:t})},updateSnapPoints:(t,i)=>{e({snapPoints:t.map(e=>({position:{x:e.position.x,y:e.position.y,z:e.position.z},type:e.type,confidence:e.confidence})),activeSnapPoint:i?{position:{x:i.position.x,y:i.position.y,z:i.position.z},type:i.type,confidence:i.confidence,description:i.description,suggestedRotation:i.suggestedRotation,suggestedDimensions:i.suggestedDimensions}:null})},rotatePlacementElement:i=>{let{placementRotation:o}=t(),a=Math.PI/2;e({placementRotation:"clockwise"===i?(o+a)%(2*Math.PI):(o-a+2*Math.PI)%(2*Math.PI),isRotationLocked:!0})},updatePlacementDimensions:i=>{let{placementDimensions:o}=t();e({placementDimensions:{...o,...i}})},setSnapTolerance:t=>{e({snapTolerance:t})},expandPlacementWall:()=>{let o=t();if(!o.isPlacing||!o.previewElement||!o.currentFloorplan){console.log("⚠️ Cannot expand: not placing or missing preview");return}if("wall"!==o.previewElement.type){console.log("⚠️ Can only expand walls, current type:",o.previewElement.type);return}try{console.log("\uD83D\uDD27 Expanding wall placement...");let{WallExpander:a}=i(4122),s=a.expandWall(o.previewElement.position,o.previewElement.dimensions,o.previewElement.rotation||0,o.currentFloorplan.elements.filter(e=>!e.metadata?.isPreview),o.currentFloorplan.dimensions);if(console.log("\uD83D\uDCCF Wall expansion result:",s),s.newDimensions.width<.5||s.newDimensions.height<.5){console.log("⚠️ Invalid expansion dimensions, skipping");return}e({placementDimensions:{width:Math.max(.5,s.newDimensions.width),height:Math.max(.5,s.newDimensions.height),depth:s.newDimensions.depth}});let r={...o.previewElement,position:{x:s.newPosition.x,y:s.newPosition.y,z:s.newPosition.z},dimensions:{width:Math.max(.5,s.newDimensions.width),height:Math.max(.5,s.newDimensions.height),depth:s.newDimensions.depth},rotation:o.previewElement.rotation,metadata:{...o.previewElement.metadata,isExpanded:!0,expansionDirection:s.expansionDirection,hitElements:s.hitElements.map(e=>e.id)}};t().updatePreview(r),console.log("✅ Wall expansion completed successfully")}catch(e){console.error("❌ Wall expansion failed:",e)}},copyElements:i=>{let o=t(),a=i||o.selectedElements;if(0===a.length||!o.currentFloorplan)return;let s=o.currentFloorplan.elements.filter(e=>a.includes(e.id));s.length>0&&(e({clipboard:s.map(e=>({...e})),clipboardMode:"copy"}),console.log(`📋 Copied ${s.length} elements to clipboard`))},cutElements:i=>{let o=t(),a=i||o.selectedElements;if(0===a.length||!o.currentFloorplan)return;let s=o.currentFloorplan.elements.filter(e=>a.includes(e.id));if(s.length>0){for(let t of(e({clipboard:s.map(e=>({...e})),clipboardMode:"cut"}),a))if(Z.b.removeElement(t).success){let t=Z.b.getCurrentModel();t.success&&t.data&&e({currentFloorplan:t.data})}e({selectedElements:[]}),console.log(`✂️ Cut ${s.length} elements to clipboard`)}},pasteElements:i=>{let o=t();if(0===o.clipboard.length||!o.currentFloorplan)return;let a=i||{x:10,y:10,z:0},s=[],r=o.clipboard[0],n=a.x-r.position.x,l=a.y-r.position.y,c=(a.z||0)-(r.position.z||0);for(let e of o.clipboard){let t={...e,position:{x:e.position.x+n,y:e.position.y+l,z:(e.position.z||0)+c},metadata:{...e.metadata,pastedFrom:e.id,pastedAt:new Date().toISOString()}},i=Z.b.addElement(t);i.success&&i.data&&s.push(i.data.id)}if(s.length>0){let t=Z.b.getCurrentModel();t.success&&t.data&&e({currentFloorplan:t.data,selectedElements:s}),console.log(`📌 Pasted ${s.length} elements at position (${a.x}, ${a.y})`)}},clearClipboard:()=>{e({clipboard:[],clipboardMode:null}),console.log("\uD83D\uDDD1️ Clipboard cleared")},hasClipboard:()=>t().clipboard.length>0,startElementEdit:t=>{console.log("\uD83D\uDD27 Starting element edit for:",t.id,"type:",t.type),e({isPlacing:!1,placementTemplate:null}),e({isEditing:!0,editingElement:{...t},originalEditingElement:{...t},placementDimensions:{width:t.dimensions.width,height:t.dimensions.height,depth:t.dimensions.depth||12},placementRotation:t.rotation||0,selectedElements:[t.id]})},updateElementEdit:i=>{let o=t();if(!o.isEditing||!o.editingElement||!o.currentFloorplan)return;let a={...i};if(i.dimensions&&o.editingElement){let e=o.editingElement.dimensions,t={...e,...i.dimensions},s=(t.width-e.width)/2,r=(t.height-e.height)/2;a.position={x:o.editingElement.position.x-s,y:o.editingElement.position.y-r,z:o.editingElement.position.z}}e({editingElement:{...o.editingElement,...a}});let s=o.currentFloorplan.elements.findIndex(e=>e.id===o.editingElement?.id);if(-1!==s){let t=[...o.currentFloorplan.elements];t[s]={...t[s],...a},e({currentFloorplan:{...o.currentFloorplan,elements:t,updatedAt:new Date}})}i.dimensions&&e({placementDimensions:{width:i.dimensions.width||o.placementDimensions.width,height:i.dimensions.height||o.placementDimensions.height,depth:i.dimensions.depth||o.placementDimensions.depth}}),void 0!==i.rotation&&e({placementRotation:i.rotation})},finalizeElementEdit:()=>{let i=t();if(!i.isEditing||!i.editingElement)return;console.log("✅ Finalizing element edit:",i.editingElement.id,"type:",i.editingElement.type);let o=Z.b.updateElement(i.editingElement.id,{dimensions:i.editingElement.dimensions,position:i.editingElement.position,rotation:i.editingElement.rotation,color:i.editingElement.color,metadata:{...i.editingElement.metadata,lastEdited:new Date().toISOString()}});if(o.success){let t=Z.b.getCurrentModel();t.success&&t.data&&(e({currentFloorplan:t.data,isEditing:!1,editingElement:null,originalEditingElement:null,selectedElements:[]}),console.log("\uD83C\uDF89 Element edit completed successfully"))}else console.error("❌ Element edit failed:",o.error)},cancelElementEdit:()=>{console.log("❌ Canceling element edit");let i=t();if(i.originalEditingElement&&i.currentFloorplan){let t=i.currentFloorplan.elements.findIndex(e=>e.id===i.originalEditingElement.id);if(-1!==t){let o=[...i.currentFloorplan.elements];o[t]={...i.originalEditingElement},e({currentFloorplan:{...i.currentFloorplan,elements:o,updatedAt:new Date}})}}e({isEditing:!1,editingElement:null,originalEditingElement:null,selectedElements:[]})},startDrag:(t,i)=>{console.log("\uD83D\uDD04 Starting drag for element:",t.id);let o={x:i.x-t.position.x,y:i.y-t.position.y,z:i.z-(t.position.z||0)};e({isDragging:!0,dragStartPosition:{...t.position,z:t.position.z||0},dragCurrentPosition:i,dragOffset:o,selectedElements:[t.id]})},updateDrag:o=>{let{SimpleGuideSystem:a}=i(4314),s=t();if(!s.isDragging||!s.dragOffset||!s.currentFloorplan)return;let r={x:o.x-s.dragOffset.x,y:o.y-s.dragOffset.y,z:o.z-s.dragOffset.z},n=r,l=s.selectedElements[0];if(l){let t=s.currentFloorplan.elements.find(e=>e.id===l);if(t){let i={position:r,dimensions:t.dimensions},o=s.currentFloorplan.elements.filter(e=>e.id!==l&&!e.metadata?.isPreview),c=new a,d=c.findGuides(i,o);e({dragGuides:d}),n=c.getSnapPosition(i,d)||{x:Math.round(r.x),y:Math.round(r.y),z:Math.round(r.z)}}}else n={x:Math.round(r.x),y:Math.round(r.y),z:Math.round(r.z)};if(!l)return;let c=s.currentFloorplan.elements.findIndex(e=>e.id===l);if(-1===c)return;let d=[...s.currentFloorplan.elements];d[c]={...d[c],position:n},e({dragCurrentPosition:o,currentFloorplan:{...s.currentFloorplan,elements:d,updatedAt:new Date}})},finalizeDrag:()=>{let i=t();if(!i.isDragging)return;console.log("✅ Drag finalized");let o=i.selectedElements[0];if(o&&i.currentFloorplan){let e=i.currentFloorplan.elements.find(e=>e.id===o);e&&Z.b.updateElement(o,{position:e.position})}e({isDragging:!1,dragStartPosition:null,dragCurrentPosition:null,dragOffset:null,dragGuides:[]})},cancelDrag:()=>{let i=t();if(!i.isDragging||!i.dragStartPosition||!i.currentFloorplan)return;console.log("❌ Drag cancelled, reverting position");let o=i.selectedElements[0];if(o){let t=i.currentFloorplan.elements.findIndex(e=>e.id===o);if(-1!==t){let o=[...i.currentFloorplan.elements];o[t]={...o[t],position:i.dragStartPosition},e({currentFloorplan:{...i.currentFloorplan,elements:o,updatedAt:new Date},isDragging:!1,dragStartPosition:null,dragCurrentPosition:null,dragOffset:null,dragGuides:[]})}}},finalizePlacement:i=>{let{placementTemplate:o,placementRotation:a,placementDimensions:s,activeSnapPoint:r,previewElement:n}=t();if(!o)return;let l=n?.metadata?.isIntelligentSnap?n.dimensions:s,c=n?.rotation!==void 0?n.rotation:a;console.log("Finalizing placement with:",{dimensions:l,rotation:c,isIntelligent:n?.metadata?.isIntelligentSnap});let d=(0,H.createElement)({position:i,templateId:o,customDimensions:l});d&&(0!==c&&(d.rotation=c),n?.metadata?.isIntelligentSnap&&(d.metadata={...d.metadata,intelligentlyPlaced:!0,snapType:n.metadata.snapType,snapDescription:n.metadata.snapDescription}),t().addElement(d)),e({isPlacing:!1,placementTemplate:null,previewElement:null,placementRotation:0,placementDimensions:{width:20,height:1,depth:12},snapPoints:[],activeSnapPoint:null})},cancelPlacement:()=>{e({isPlacing:!1,placementTemplate:null,previewElement:null,placementRotation:0,snapPoints:[],activeSnapPoint:null})},toggleElementSelection:i=>{let{selectedElements:o}=t();o.includes(i)?e({selectedElements:o.filter(e=>e!==i)}):e({selectedElements:[...o,i]})},clearSelection:()=>{e({selectedElements:[]})},toggleMeasurementMode:()=>{let{measurementMode:i}=t();console.log("\uD83C\uDFAF toggleMeasurementMode called:",{currentMode:i,newMode:!i}),e({measurementMode:!i,selectedObjectsForMeasurement:[null,null],measurementDistance:null,measurementType:"horizontal"})},setCameraPosition:t=>{e({cameraPosition:t})},setCameraTarget:t=>{e({cameraTarget:t})},toggleLayerVisibility:i=>{let{hiddenLayers:o}=t(),a=new Set(o);a.has(i)?(a.delete(i),console.log(`🔍 Layer "${i}" is now VISIBLE`)):(a.add(i),console.log(`🔍 Layer "${i}" is now HIDDEN`)),e({hiddenLayers:a}),console.log("\uD83D\uDD0D Current hidden layers:",Array.from(a))},hideLayer:i=>{let{hiddenLayers:o}=t(),a=new Set(o);a.add(i),e({hiddenLayers:a})},showLayer:i=>{let{hiddenLayers:o}=t(),a=new Set(o);a.delete(i),e({hiddenLayers:a})},isLayerVisible:e=>{let{hiddenLayers:i}=t();return!i.has(e)},updateLayerGroups:()=>{let{currentFloorplan:i}=t();if(!i)return;let o={};i.elements.forEach(e=>{"steel"===e.material&&e.metadata?.beam_type==="I-beam"&&(o["steel-ibeams"]||(o["steel-ibeams"]=[]),o["steel-ibeams"].push(e.id)),"steel"===e.material&&e.metadata?.truss_type==="support_truss"&&(o["support-trusses"]||(o["support-trusses"]=[]),o["support-trusses"].push(e.id)),e.metadata?.category==="room-walls"&&(o["room-walls"]||(o["room-walls"]=[]),o["room-walls"].push(e.id));let t=e.metadata?.category;if(t){let i=`category-${t}`;o[i]||(o[i]=[]),o[i].push(e.id)}let i=`type-${e.type}`;o[i]||(o[i]=[]),o[i].push(e.id)}),console.log("\uD83D\uDD0D Updated layer groups:",o),e({layerGroups:o})},selectElementGroup:i=>{let{currentFloorplan:o,layerGroups:a}=t();if(!o)return;let s=o.elements.find(e=>e.id===i);if(s){if("steel"===s.material&&s.metadata?.beam_type==="I-beam"){let t=a["steel-ibeams"]||[];e({selectedElements:t}),console.log(`🎯 Selected ${t.length} I-beams as a group`);return}e({selectedElements:[i]})}}}),"getStorage"in(c={name:"warehouse-cad-storage",partialize:e=>({viewMode:e.viewMode,showMeasurements:e.showMeasurements,cameraPosition:e.cameraPosition,cameraTarget:e.cameraTarget})})||"serialize"in c||"deserialize"in c?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),o=l,a=c,(e,t,i)=>{let s,r,n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...a},l=!1,c=new Set,d=new Set;try{s=n.getStorage()}catch(e){}if(!s)return o((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...t)},t,i);let m=X(n.serialize),h=()=>{let e;let i=m({state:n.partialize({...t()}),version:n.version}).then(e=>s.setItem(n.name,e)).catch(t=>{e=t});if(e)throw e;return i},p=i.setState;i.setState=(e,t)=>{p(e,t),h()};let u=o((...t)=>{e(...t),h()},t,i),g=()=>{var i;if(!s)return;l=!1,c.forEach(e=>e(t()));let o=(null==(i=n.onRehydrateStorage)?void 0:i.call(n,t()))||void 0;return X(s.getItem.bind(s))(n.name).then(e=>{if(e)return n.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return e.state;if(n.migrate)return n.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(i=>{var o;return e(r=n.merge(i,null!=(o=t())?o:u),!0),h()}).then(()=>{null==o||o(r,void 0),l=!0,d.forEach(e=>e(r))}).catch(e=>{null==o||o(void 0,e)})};return i.persist={setOptions:e=>{n={...n,...e},e.getStorage&&(s=e.getStorage())},clearStorage:()=>{null==s||s.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>g(),hasHydrated:()=>l,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},g(),r||u}):(s=l,r=c,(e,t,i)=>{let o,a={storage:function(e,t){let i;try{i=e()}catch(e){return}return{getItem:e=>{var o;let a=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(o=i.getItem(e))?o:null;return s instanceof Promise?s.then(a):a(s)},setItem:(e,o)=>i.setItem(e,JSON.stringify(o,null==t?void 0:t.replacer)),removeItem:e=>i.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...r},n=!1,l=new Set,c=new Set,d=a.storage;if(!d)return s((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),e(...t)},t,i);let m=()=>{let e=a.partialize({...t()});return d.setItem(a.name,{state:e,version:a.version})},h=i.setState;i.setState=(e,t)=>{h(e,t),m()};let p=s((...t)=>{e(...t),m()},t,i);i.getInitialState=()=>p;let u=()=>{var i,s;if(!d)return;n=!1,l.forEach(e=>{var i;return e(null!=(i=t())?i:p)});let r=(null==(s=a.onRehydrateStorage)?void 0:s.call(a,null!=(i=t())?i:p))||void 0;return X(d.getItem.bind(d))(a.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate)return[!0,a.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(i=>{var s;let[r,n]=i;if(e(o=a.merge(n,null!=(s=t())?s:p),!0),r)return m()}).then(()=>{null==r||r(o,void 0),o=t(),n=!0,c.forEach(e=>e(o))}).catch(e=>{null==r||r(void 0,e)})};return i.persist={setOptions:e=>{a={...a,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>u(),hasHydrated:()=>n,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},a.skipHydration||u(),o||p})));function G({className:e=""}){let{currentFloorplan:t,selectedElements:i,undoRedoStatus:o,lastError:a,availableModels:s,isPlacing:r,placementTemplate:n,placementRotation:l,placementDimensions:c,activeSnapPoint:p,snapTolerance:u,clipboard:g,clipboardMode:x,isEditing:y,editingElement:f,addElement:b,undo:_,redo:v,removeElement:E,duplicateElement:j,createNewModel:M,switchModel:L,refreshModelList:O,clearError:$,loadCurrentModel:W,startPlacement:B,cancelPlacement:U,rotatePlacementElement:q,updatePlacementDimensions:Y,setSnapTolerance:X,expandPlacementWall:G,isRotationLocked:J,copyElements:K,cutElements:Q,pasteElements:ee,clearClipboard:et,hasClipboard:ei,updateElementEdit:eo,finalizeElementEdit:ea,cancelElementEdit:es}=V(),[er,en]=(0,m.useState)(!1),[el,ec]=(0,m.useState)(!1),[ed,em]=(0,m.useState)(!1),[eh,ep]=(0,m.useState)(!1),[eu,eg]=(0,m.useState)(!1),[ex,ey]=(0,m.useState)(""),ef=e=>{if(!H.ELEMENT_TEMPLATES[e]){console.error("Template not found:",e);return}B(e),en(!1)};return h().useEffect(()=>{O()},[O]),(0,d.jsxs)("div",{className:`bg-[#2d2d2d] border-b border-[#3e3e3e] px-3 py-2 ${e}`,children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-2",children:r||y?(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`text-xs px-2 py-1 rounded ${y?"text-[#fbbf24] bg-[#f59e0b]/20":"text-[#4ade80] bg-[#22c55e]/20"}`,children:y?`Editing: ${f?.type} (${f?.id?.slice(0,8)}...)`:`Placing: ${H.ELEMENT_TEMPLATES[n]?.name}`}),(0,d.jsxs)("div",{className:`flex items-center gap-1 rounded px-1 ${J?"bg-[#4c4c4c] border border-blue-400":"bg-[#3c3c3c]/50"}`,children:[d.jsx("button",{onClick:()=>{q("counterclockwise")},className:"p-1 hover:bg-[#4c4c4c] rounded transition-colors",title:"Rotate Left (Shift+R)",children:d.jsx(D,{size:10})}),(0,d.jsxs)("span",{className:`text-xs px-1 ${J?"text-blue-300":"text-[#888]"}`,children:[Math.round(180*l/Math.PI),"\xb0",J?" \uD83D\uDD12":""]}),d.jsx("button",{onClick:()=>{q("clockwise")},className:"p-1 hover:bg-[#4c4c4c] rounded transition-colors",title:"Rotate Right (R)",children:d.jsx(N,{size:10})})]}),n&&["EXTERIOR_WALL","INTERIOR_WALL","PARTITION_WALL"].includes(n)&&(0,d.jsxs)("div",{className:"flex items-center gap-1 bg-[#3c3c3c]/50 rounded px-1",children:[d.jsx("button",{onClick:()=>{G()},className:"p-1 hover:bg-[#4c4c4c] rounded transition-colors",title:"Expand Wall Edge-to-Edge (E)",children:d.jsx(S,{size:10})}),d.jsx("span",{className:"text-xs text-[#888] px-1",children:"Expand"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 bg-[#3c3c3c]/50 rounded px-2 py-1",children:[d.jsx("span",{className:"text-xs text-[#888]",children:"W:"}),d.jsx("input",{type:"number",value:c.width,onChange:e=>{let t=Math.max(1,parseFloat(e.target.value)||1);y?eo({dimensions:{...f.dimensions,width:t}}):Y({width:t})},className:"w-12 bg-transparent text-xs text-[#cccccc] border-none outline-none",min:"1",step:"1"}),d.jsx("span",{className:"text-xs text-[#888]",children:"H:"}),d.jsx("input",{type:"number",value:c.height,onChange:e=>{let t=Math.max(1,parseFloat(e.target.value)||1);y?eo({dimensions:{...f.dimensions,height:t}}):Y({height:t})},className:"w-12 bg-transparent text-xs text-[#cccccc] border-none outline-none",min:"1",step:"1"}),(n&&H.ELEMENT_TEMPLATES[n]?.defaultDimensions.depth||y&&f?.dimensions.depth)&&(0,d.jsxs)(d.Fragment,{children:[d.jsx("span",{className:"text-xs text-[#888]",children:"D:"}),d.jsx("input",{type:"number",value:c.depth,onChange:e=>{let t=Math.max(1,parseFloat(e.target.value)||1);y?eo({dimensions:{...f.dimensions,depth:t}}):Y({depth:t})},className:"w-12 bg-transparent text-xs text-[#cccccc] border-none outline-none",min:"1",step:"1"})]})]}),y&&f&&(0,d.jsxs)("div",{className:"flex items-center gap-1 bg-[#3c3c3c]/50 rounded px-2 py-1",children:[d.jsx("span",{className:"text-xs text-[#888]",children:"Color:"}),d.jsx("input",{type:"color",value:f.color,onChange:e=>{eo({color:e.target.value})},className:"w-6 h-4 bg-transparent border-none cursor-pointer",title:"Change element color"})]}),y&&f&&(0,d.jsxs)("div",{className:"flex items-center gap-1 bg-[#3c3c3c]/50 rounded px-2 py-1",children:[d.jsx("span",{className:"text-xs text-[#888]",children:"Center X:"}),d.jsx("input",{type:"number",value:Math.round((f.position.x+f.dimensions.width/2)*10)/10,onChange:e=>{let t=(parseFloat(e.target.value)||0)-f.dimensions.width/2;eo({position:{...f.position,x:t}})},className:"w-12 bg-transparent text-xs text-[#cccccc] border-none outline-none",step:"0.1"}),d.jsx("span",{className:"text-xs text-[#888]",children:"Y:"}),d.jsx("input",{type:"number",value:Math.round((f.position.y+f.dimensions.height/2)*10)/10,onChange:e=>{let t=(parseFloat(e.target.value)||0)-f.dimensions.height/2;eo({position:{...f.position,y:t}})},className:"w-12 bg-transparent text-xs text-[#cccccc] border-none outline-none",step:"0.1"}),d.jsx("span",{className:"text-xs text-[#888]",children:"Z:"}),d.jsx("input",{type:"number",value:Math.round(10*(f.position.z||0))/10,onChange:e=>{let t=parseFloat(e.target.value)||0;eo({position:{...f.position,z:t}})},className:"w-12 bg-transparent text-xs text-[#cccccc] border-none outline-none",step:"0.1"})]}),p&&d.jsx("div",{className:"text-xs text-[#fbbf24] bg-[#f59e0b]/20 px-2 py-1 rounded max-w-48",children:p.description||`Snap: ${p.type}`}),(0,d.jsxs)("div",{className:"flex items-center gap-1 bg-[#3c3c3c]/50 rounded px-2 py-1",children:[d.jsx("span",{className:"text-xs text-[#888]",children:"Snap:"}),d.jsx("input",{type:"range",min:"0.5",max:"3.0",step:"0.1",value:u,onChange:e=>X(parseFloat(e.target.value)),className:"w-16"}),(0,d.jsxs)("span",{className:"text-xs text-[#cccccc]",children:[u.toFixed(1),"ft"]}),d.jsx("button",{onClick:()=>X(1),className:"text-xs text-[#888] hover:text-[#cccccc] px-1",title:"Reset to default (1.0ft)",children:"↻"})]}),(0,d.jsxs)("button",{onClick:()=>{y?es():U()},className:"flex items-center gap-1 px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",title:y?"Cancel Edit (ESC)":"Cancel Placement (ESC)",children:[d.jsx(w,{size:12}),"Cancel"]}),y&&(0,d.jsxs)("button",{onClick:ea,className:"flex items-center gap-1 px-2 py-1 text-xs text-[#10b981] hover:bg-[#065f46] rounded transition-colors",title:"Confirm Edit (Enter)",children:[d.jsx("span",{children:"✓"}),"Confirm"]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{onClick:()=>en(!er),className:"flex items-center gap-1 px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",title:"Add Element",children:[d.jsx(k,{size:12}),"Add"]}),er&&d.jsx("div",{className:"absolute top-full left-0 mt-1 bg-[#252526] border border-[#3e3e3e] rounded shadow-lg z-50 min-w-48",children:Object.entries(H.TEMPLATE_CATEGORIES).map(([e,t])=>(0,d.jsxs)("div",{className:"p-2",children:[d.jsx("div",{className:"text-[10px] text-[#858585] uppercase tracking-wide mb-1",children:e.replace("_"," ")}),t.map(e=>{let t=H.ELEMENT_TEMPLATES[e];return d.jsx("button",{onClick:()=>ef(e),className:"w-full text-left px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",children:t.name},e)})]},e))})]}),i.length>0&&(0,d.jsxs)(d.Fragment,{children:[d.jsx("button",{onClick:()=>K(),className:"flex items-center gap-1 px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",title:"Copy Selected (Ctrl+C)",children:d.jsx(z,{size:12})}),d.jsx("button",{onClick:()=>Q(),className:"flex items-center gap-1 px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",title:"Cut Selected (Ctrl+X)",children:d.jsx("span",{className:"text-xs",children:"✂️"})}),d.jsx("button",{onClick:()=>i.forEach(e=>j(e)),className:"flex items-center gap-1 px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",title:"Duplicate Selected",children:d.jsx("span",{className:"text-xs",children:"\uD83D\uDCCB"})}),d.jsx("button",{onClick:()=>i.forEach(e=>E(e)),className:"flex items-center gap-1 px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",title:"Delete Selected",children:d.jsx(C,{size:12})}),(0,d.jsxs)("span",{className:"text-xs text-[#888] px-1",children:[i.length," selected"]})]}),ei()&&(0,d.jsxs)(d.Fragment,{children:[d.jsx("div",{className:"w-px h-4 bg-[#3c3c3c] mx-1"}),d.jsx("button",{onClick:()=>{ee({x:50,y:50,z:0})},className:"flex items-center gap-1 px-2 py-1 text-xs text-[#10b981] hover:bg-[#065f46] rounded transition-colors",title:"Paste (Ctrl+V)",children:d.jsx("span",{className:"text-xs",children:"\uD83D\uDCCC"})}),d.jsx("button",{onClick:()=>et(),className:"flex items-center gap-1 px-1 py-1 text-xs text-[#888] hover:text-[#cccccc] rounded transition-colors",title:"Clear Clipboard",children:d.jsx("span",{className:"text-xs",children:"\uD83D\uDDD1️"})}),(0,d.jsxs)("span",{className:"text-xs text-[#888] px-1",children:[g.length," ","cut"===x?"cut":"copied"]})]})]})}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[t&&t.elements?(0,d.jsxs)("div",{className:"text-xs text-[#cccccc]",children:[t.name," • ",t.elements.length," elements"]}):d.jsx("div",{className:"text-xs text-[#858585]",children:"No model loaded"}),a&&(0,d.jsxs)("div",{className:"flex items-center gap-1 text-xs text-red-400",children:[d.jsx(I,{size:12}),d.jsx("span",{children:a}),d.jsx("button",{onClick:$,className:"ml-1 hover:text-red-300",title:"Dismiss Error",children:"\xd7"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:_,disabled:!o.canUndo,className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${o.canUndo?"text-[#cccccc] hover:bg-[#3c3c3c]":"text-[#858585] cursor-not-allowed"}`,title:`Undo (${o.undoCount} available)`,children:d.jsx(P,{size:12})}),d.jsx("button",{onClick:v,disabled:!o.canRedo,className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${o.canRedo?"text-[#cccccc] hover:bg-[#3c3c3c]":"text-[#858585] cursor-not-allowed"}`,title:`Redo (${o.redoCount} available)`,children:d.jsx(T,{size:12})}),d.jsx("div",{className:"w-px h-4 bg-[#3e3e3e]"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{onClick:()=>ec(!el),className:"flex items-center gap-1 px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",title:"Manage Models",children:[d.jsx(R,{size:12}),"Models"]}),el&&(0,d.jsxs)("div",{className:"absolute top-full right-0 mt-1 bg-[#252526] border border-[#3e3e3e] rounded shadow-lg z-50 min-w-48 max-h-64 overflow-y-auto",children:[(0,d.jsxs)("div",{className:"p-2 border-b border-[#3e3e3e]",children:[d.jsx("button",{onClick:()=>{M("EMPTY"),ec(!1)},className:"w-full text-left px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",children:"+ New Empty Model"}),d.jsx("button",{onClick:()=>{M("BASIC"),ec(!1)},className:"w-full text-left px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",children:"+ New Basic Model"})]}),(0,d.jsxs)("div",{className:"p-2",children:[d.jsx("div",{className:"text-[10px] text-[#858585] uppercase tracking-wide mb-1",children:"Available Models"}),s.map(e=>(0,d.jsxs)("button",{onClick:()=>{L(e.id),ec(!1)},className:`w-full text-left px-2 py-1 text-xs rounded transition-colors ${t?.id===e.id?"bg-[#0e639c] text-white":"text-[#cccccc] hover:bg-[#3c3c3c]"}`,children:[e.name,d.jsx("div",{className:"text-[10px] text-[#858585]",children:new Date(e.updatedAt).toLocaleDateString()})]},e.id))]})]})]}),d.jsx("button",{onClick:()=>em(!0),className:"flex items-center gap-1 px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",title:"Export Model",children:d.jsx(A,{size:12})}),d.jsx("button",{onClick:()=>eg(!0),className:"flex items-center gap-1 px-2 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",title:"Import Model",children:d.jsx(F,{size:12})})]})]}),ed&&t&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-[#252526] border border-[#3e3e3e] rounded p-4 w-96",children:[d.jsx("h3",{className:"text-sm text-[#cccccc] mb-3",children:"Export Model"}),(0,d.jsxs)("p",{className:"text-xs text-[#858585] mb-4",children:['Export "',t.name,'" as JSON file']}),(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{onClick:()=>em(!1),className:"px-3 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",children:"Cancel"}),d.jsx("button",{onClick:()=>{if(!t)return;let e=Z.b.exportModel(t.id);if(e.success&&e.data){let i=new Blob([e.data],{type:"application/json"}),o=URL.createObjectURL(i),a=document.createElement("a");a.href=o,a.download=`${t.name.replace(/\s+/g,"_")}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o),em(!1)}},className:"px-3 py-1 text-xs bg-[#0e639c] text-white hover:bg-[#1177bb] rounded transition-colors",children:"Export"})]})]})}),eu&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-[#252526] border border-[#3e3e3e] rounded p-4 w-96",children:[d.jsx("h3",{className:"text-sm text-[#cccccc] mb-3",children:"Import Model"}),(0,d.jsxs)("div",{className:"mb-3",children:[d.jsx("label",{className:"block text-xs text-[#858585] mb-1",children:"Upload JSON File"}),d.jsx("input",{type:"file",accept:".json",onChange:e=>{let t=e.target.files?.[0];if(!t)return;let i=new FileReader;i.onload=e=>{ey(e.target?.result)},i.readAsText(t)},className:"w-full text-xs text-[#cccccc] bg-[#3c3c3c] border border-[#3e3e3e] rounded px-2 py-1"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-xs text-[#858585] mb-1",children:"Or Paste JSON Data"}),d.jsx("textarea",{value:ex,onChange:e=>ey(e.target.value),placeholder:"Paste JSON model data here...",className:"w-full h-24 text-xs text-[#cccccc] bg-[#3c3c3c] border border-[#3e3e3e] rounded px-2 py-1 resize-none"})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{onClick:()=>{eg(!1),ey("")},className:"px-3 py-1 text-xs text-[#cccccc] hover:bg-[#3c3c3c] rounded transition-colors",children:"Cancel"}),d.jsx("button",{onClick:()=>{if(!ex.trim())return;let e=Z.b.importModel(ex);e.success&&e.data&&(L(e.data.id),O(),eg(!1),ey(""))},disabled:!ex.trim(),className:`px-3 py-1 text-xs rounded transition-colors ${ex.trim()?"bg-[#0e639c] text-white hover:bg-[#1177bb]":"bg-[#3c3c3c] text-[#858585] cursor-not-allowed"}`,children:"Import"})]})]})})]})}let J=u()(async()=>{},{loadableGenerated:{modules:["/Users/whale/Desktop/WarehouseCAD/app/page.tsx -> @/components/ThreeRenderer"]},ssr:!1,loading:()=>d.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-700",children:d.jsx("div",{className:"text-white text-xl",children:"Loading 3D Renderer..."})})});function K(){let[e,t]=(0,m.useState)(!1),i=(0,m.useRef)(null),{measurementMode:o,selectedObjectsForMeasurement:a,measurementDistance:s,measurementType:r,toggleMeasurementMode:n,clearMeasurementSelection:l,setMeasurementType:c,selectedElements:h,clearSelection:p,showMeasurements:u,toggleMeasurements:g,firstPersonMode:x,toggleFirstPersonMode:y,hiddenLayers:D,layerGroups:N,toggleLayerVisibility:S,isLayerVisible:k}=V();return(0,m.useEffect)(()=>{let e=e=>{i.current&&!i.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,d.jsxs)("div",{className:"h-screen flex flex-col bg-gray-700",children:[d.jsx("header",{className:"flex-shrink-0 bg-[#2d2d2d] border-b border-[#3e3e3e] h-8 px-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-between h-full",children:[d.jsx("div",{className:"flex items-center",children:d.jsx("span",{className:"text-[#cccccc] text-xs font-medium",children:"WarehouseCAD"})}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[!o&&h.length>0&&(0,d.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-[#cccccc] bg-[#3c3c3c] px-2 py-0.5 rounded",children:[d.jsx(f,{size:8}),h.length]}),d.jsx("button",{onClick:n,className:`flex items-center justify-center w-6 h-6 rounded transition-colors ${o?"bg-[#0e639c] text-white":"text-[#cccccc] hover:bg-[#3c3c3c]"}`,title:"Measure Distance",children:d.jsx(b,{size:12})}),o&&d.jsx("button",{onClick:l,className:"flex items-center justify-center w-6 h-6 rounded bg-red-600 text-white hover:bg-red-700 transition-colors",title:"Clear Measurement Selection",children:d.jsx(w,{size:12})}),d.jsx("button",{onClick:g,className:`flex items-center justify-center w-6 h-6 rounded transition-colors ${u?"text-[#cccccc] hover:bg-[#3c3c3c]":"text-[#858585] hover:bg-[#3c3c3c]"}`,title:u?"Hide All Measurements":"Show All Measurements",children:u?d.jsx(_,{size:12}):d.jsx(v,{size:12})}),(0,d.jsxs)("div",{className:"relative",ref:i,children:[d.jsx("button",{onClick:()=>t(!e),className:`flex items-center justify-center w-6 h-6 rounded transition-colors ${e?"bg-[#0e639c] text-white":"text-[#cccccc] hover:bg-[#3c3c3c]"}`,title:"Layers",children:d.jsx(E,{size:12})}),e&&(0,d.jsxs)("div",{className:"absolute top-8 left-0 bg-[#2d2d2d] border border-[#3e3e3e] rounded shadow-lg min-w-48 z-50",children:[d.jsx("div",{className:"px-3 py-2 border-b border-[#3e3e3e]",children:d.jsx("div",{className:"text-[10px] text-[#cccccc] font-medium",children:"LAYERS"})}),N["steel-ibeams"]&&N["steel-ibeams"].length>0&&(0,d.jsxs)("div",{className:"px-3 py-1.5 hover:bg-[#3c3c3c] flex items-center justify-between cursor-pointer",onClick:()=>{console.log("\uD83D\uDD0D Toggling steel-ibeams layer via row click"),S("steel-ibeams")},children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-3 h-3 rounded border ${k("steel-ibeams")?"bg-[#0e639c] border-[#0e639c]":"border-[#666]"}`,children:k("steel-ibeams")&&d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-sm"})})}),d.jsx("span",{className:"text-[11px] text-[#cccccc]",children:"Steel I-Beams"})]}),(0,d.jsxs)("button",{onClick:e=>{e.stopPropagation(),console.log("\uD83D\uDD0D Toggling steel-ibeams layer"),S("steel-ibeams")},className:"text-[10px] text-[#888] hover:text-[#cccccc]",children:["(",N["steel-ibeams"].length,")"]})]}),N["room-walls"]&&N["room-walls"].length>0&&(0,d.jsxs)("div",{className:"px-3 py-1.5 hover:bg-[#3c3c3c] flex items-center justify-between cursor-pointer",onClick:()=>{console.log("\uD83D\uDD0D Toggling room-walls layer via row click"),S("room-walls")},children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-3 h-3 rounded border ${k("room-walls")?"bg-[#0e639c] border-[#0e639c]":"border-[#666]"}`,children:k("room-walls")&&d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-sm"})})}),d.jsx("span",{className:"text-[11px] text-[#cccccc]",children:"Room Walls"})]}),(0,d.jsxs)("button",{onClick:e=>{e.stopPropagation(),console.log("\uD83D\uDD0D Toggling room-walls layer"),S("room-walls")},className:"text-[10px] text-[#888] hover:text-[#cccccc]",children:["(",N["room-walls"].length,")"]})]}),N["category-exterior"]&&N["category-exterior"].length>0&&(0,d.jsxs)("div",{className:"px-3 py-1.5 hover:bg-[#3c3c3c] flex items-center justify-between cursor-pointer",onClick:()=>{console.log("\uD83D\uDD0D Toggling category-exterior layer"),S("category-exterior")},children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-3 h-3 rounded border ${k("category-exterior")?"bg-[#0e639c] border-[#0e639c]":"border-[#666]"}`,children:k("category-exterior")&&d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-sm"})})}),d.jsx("span",{className:"text-[11px] text-[#cccccc]",children:"Exterior Walls"})]}),(0,d.jsxs)("button",{onClick:e=>{e.stopPropagation(),S("category-exterior")},className:"text-[10px] text-[#888] hover:text-[#cccccc]",children:["(",N["category-exterior"].length,")"]})]}),N["category-interior"]&&N["category-interior"].length>0&&(0,d.jsxs)("div",{className:"px-3 py-1.5 hover:bg-[#3c3c3c] flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-3 h-3 rounded border ${k("category-interior")?"bg-[#0e639c] border-[#0e639c]":"border-[#666]"}`,children:k("category-interior")&&d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-sm"})})}),d.jsx("span",{className:"text-[11px] text-[#cccccc]",children:"Interior Walls"})]}),(0,d.jsxs)("button",{onClick:()=>S("category-interior"),className:"text-[10px] text-[#888] hover:text-[#cccccc]",children:["(",N["category-interior"].length,")"]})]}),N["category-structural"]&&N["category-structural"].length>0&&(0,d.jsxs)("div",{className:"px-3 py-1.5 hover:bg-[#3c3c3c] flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-3 h-3 rounded border ${k("category-structural")?"bg-[#0e639c] border-[#0e639c]":"border-[#666]"}`,children:k("category-structural")&&d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-sm"})})}),d.jsx("span",{className:"text-[11px] text-[#cccccc]",children:"Structural"})]}),(0,d.jsxs)("button",{onClick:()=>S("category-structural"),className:"text-[10px] text-[#888] hover:text-[#cccccc]",children:["(",N["category-structural"].length,")"]})]}),N["type-wall"]&&N["type-wall"].length>0&&(0,d.jsxs)("div",{className:"px-3 py-1.5 hover:bg-[#3c3c3c] flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-3 h-3 rounded border ${k("type-wall")?"bg-[#0e639c] border-[#0e639c]":"border-[#666]"}`,children:k("type-wall")&&d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-sm"})})}),d.jsx("span",{className:"text-[11px] text-[#cccccc]",children:"All Walls"})]}),(0,d.jsxs)("button",{onClick:()=>S("type-wall"),className:"text-[10px] text-[#888] hover:text-[#cccccc]",children:["(",N["type-wall"].length,")"]})]}),N["type-fixture"]&&N["type-fixture"].length>0&&(0,d.jsxs)("div",{className:"px-3 py-1.5 hover:bg-[#3c3c3c] flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-3 h-3 rounded border ${k("type-fixture")?"bg-[#0e639c] border-[#0e639c]":"border-[#666]"}`,children:k("type-fixture")&&d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-sm"})})}),d.jsx("span",{className:"text-[11px] text-[#cccccc]",children:"Fixtures"})]}),(0,d.jsxs)("button",{onClick:()=>S("type-fixture"),className:"text-[10px] text-[#888] hover:text-[#cccccc]",children:["(",N["type-fixture"].length,")"]})]}),0===Object.keys(N).length&&d.jsx("div",{className:"px-3 py-2 text-[10px] text-[#888]",children:"No layers available"})]})]}),d.jsx("button",{onClick:y,className:`flex items-center justify-center w-6 h-6 rounded transition-colors ${x?"bg-[#0e639c] text-white":"text-[#cccccc] hover:bg-[#3c3c3c]"}`,title:x?"Exit First Person Mode":"Enter First Person Mode (WASD + Mouse)",children:d.jsx(j,{size:12})}),!o&&h.length>0&&d.jsx("button",{onClick:p,className:"flex items-center justify-center w-6 h-6 rounded text-[#cccccc] hover:bg-[#3c3c3c] transition-colors",title:"Clear Selection",children:d.jsx(w,{size:12})})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[x&&d.jsx("div",{className:"text-[10px] text-[#cccccc]",children:"First Person • WASD + Mouse"}),!x&&o&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-[10px] text-[#cccccc]",children:a[0]&&a[1]&&s?`${r.toUpperCase()}: ${s.toFixed(1)}ft`:a[0]?"Click 2nd object":"Click 1st object"}),(a[0]||a[1])&&d.jsx("button",{onClick:l,className:"flex items-center justify-center w-5 h-5 rounded bg-red-600 text-white hover:bg-red-700 transition-colors",title:"Clear Measurement Selection",children:d.jsx(w,{size:10})}),a[0]&&a[1]&&(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>c("horizontal"),className:`px-1 py-0.5 text-[8px] rounded ${"horizontal"===r?"bg-cyan-600 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,title:"Horizontal distance (X-axis)",children:"H"}),d.jsx("button",{onClick:()=>c("vertical"),className:`px-1 py-0.5 text-[8px] rounded ${"vertical"===r?"bg-green-600 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,title:"Vertical distance (Y-axis)",children:"V"}),d.jsx("button",{onClick:()=>c("height"),className:`px-1 py-0.5 text-[8px] rounded ${"height"===r?"bg-orange-600 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,title:"Height distance (Z-axis)",children:"Z"}),d.jsx("button",{onClick:()=>c("direct"),className:`px-1 py-0.5 text-[8px] rounded ${"direct"===r?"bg-gray-100 text-gray-900":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,title:"Direct 3D distance",children:"D"})]})]}),!x&&!o&&0===h.length&&d.jsx("div",{className:"text-[10px] text-[#858585]",children:"Ready"})]})]})}),d.jsx(G,{}),d.jsx("div",{className:"flex-1",children:d.jsx(M,{fallback:d.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-700",children:d.jsx("div",{className:"text-white text-xl",children:"Initializing 3D Renderer..."})}),children:d.jsx(m.Suspense,{fallback:d.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-700",children:d.jsx("div",{className:"text-white",children:"Loading 3D scene..."})}),children:d.jsx(J,{})})})})]})}},6639:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ELEMENT_TEMPLATES:()=>a,TEMPLATE_CATEGORIES:()=>s,calculateElementArea:()=>h,calculateElementDistance:()=>u,calculateElementVolume:()=>p,calculateStraightLineDistance:()=>g,createAndAddElement:()=>n,createElement:()=>r,duplicateElementPattern:()=>m,elementsOverlap:()=>y,getElementBounds:()=>x,snapPosition:()=>c,transformElement:()=>d,validateElement:()=>l});var o=i(8842);let a={EXTERIOR_WALL:{id:"exterior-wall",name:"Exterior Wall",description:"Load-bearing brick exterior wall",type:"wall",defaultDimensions:{width:20,height:1,depth:12},defaultColor:"#4a5568",category:"exterior",metadata:{category:"exterior",material_type:"brick",load_bearing:!0}},INTERIOR_WALL:{id:"interior-wall",name:"Interior Wall",description:"Non-load-bearing drywall interior wall",type:"wall",defaultDimensions:{width:20,height:1,depth:12},defaultColor:"#ffffff",category:"interior",metadata:{category:"interior",material_type:"drywall",load_bearing:!1}},PARTITION_WALL:{id:"partition-wall",name:"Partition Wall",description:"Temporary or modular partition wall",type:"wall",defaultDimensions:{width:20,height:1,depth:8},defaultColor:"#e2e8f0",category:"interior",metadata:{category:"interior",material_type:"modular",load_bearing:!1,temporary:!0}},FIREWALL:{id:"firewall",name:"Firewall",description:"Fire-rated wall with enhanced safety features",type:"wall",defaultDimensions:{width:20,height:1,depth:12},defaultColor:"#dc2626",material:"concrete",category:"fire-safety",metadata:{category:"fire-safety",material_type:"fire-rated-concrete",load_bearing:!0,fire_rating:"2-hour",extends_to_exterior:!0,crosses_hallways:!0,firewall_marking:"subtle"}},STEEL_BEAM:{id:"steel-beam",name:"Steel I-Beam (Single Layer)",description:"Structural steel I-beam column - single layer",type:"fixture",defaultDimensions:{width:.67,height:.67,depth:14},defaultColor:"#2c3e50",material:"steel",category:"structural",metadata:{category:"structural",beam_type:"I-beam",beam_size:"8_inch",beam_layers:1,load_bearing:!0}},STEEL_BEAM_MULTI:{id:"steel-beam-multi",name:"Steel I-Beam (Multi-Layer)",description:"Structural steel I-beam column - configurable layers",type:"fixture",defaultDimensions:{width:.67,height:.67,depth:14},defaultColor:"#2c3e50",material:"steel",category:"structural",metadata:{category:"structural",beam_type:"I-beam",beam_size:"8_inch",beam_layers:2,load_bearing:!0}},STEEL_COLUMN:{id:"steel-column",name:"Steel Column",description:"Structural steel support column",type:"fixture",defaultDimensions:{width:1,height:1,depth:12},defaultColor:"#34495e",material:"steel",category:"structural",metadata:{category:"structural",beam_type:"column",load_bearing:!0}},CONCRETE_PILLAR:{id:"concrete-pillar",name:"Concrete Pillar",description:"Reinforced concrete support pillar",type:"fixture",defaultDimensions:{width:2,height:2,depth:12},defaultColor:"#6b7280",material:"concrete",category:"structural",metadata:{category:"structural",pillar_type:"reinforced_concrete",load_bearing:!0}},SINGLE_DOOR:{id:"single-door",name:"Single Door",description:"Standard single door",type:"fixture",defaultDimensions:{width:3,height:1,depth:8},defaultColor:"#8B4513",material:"wood",category:"access",metadata:{category:"access",door_type:"single"}},DOUBLE_DOOR:{id:"double-door",name:"Double Door",description:"Wide double door for high traffic areas",type:"fixture",defaultDimensions:{width:6,height:1,depth:8},defaultColor:"#8B4513",material:"wood",category:"access",metadata:{category:"access",door_type:"double"}},OVERHEAD_DOOR:{id:"overhead-door",name:"Overhead Door",description:"Large overhead door for loading docks",type:"fixture",defaultDimensions:{width:12,height:1,depth:12},defaultColor:"#718096",material:"steel",category:"access",metadata:{category:"access",door_type:"overhead",industrial:!0}},STANDARD_WINDOW:{id:"standard-window",name:"Standard Window",description:"Standard office window",type:"window",defaultDimensions:{width:4,height:1,depth:4},defaultColor:"#cbd5e0",category:"access",metadata:{category:"access",window_type:"standard"}},INDUSTRIAL_WINDOW:{id:"industrial-window",name:"Industrial Window",description:"Large industrial window for warehouses",type:"window",defaultDimensions:{width:8,height:1,depth:6},defaultColor:"#a0aec0",category:"access",metadata:{category:"access",window_type:"industrial"}},LOADING_DOCK:{id:"loading-dock",name:"Loading Dock",description:"Truck loading dock area",type:"fixture",defaultDimensions:{width:12,height:8,depth:2},defaultColor:"#4a5568",material:"concrete",category:"industrial",metadata:{category:"industrial",dock_type:"truck_loading",specialized:!0}},OFFICE_SPACE:{id:"office-space",name:"Office Space",description:"Designated office area",type:"room",defaultDimensions:{width:12,height:12,depth:10},defaultColor:"#f7fafc",category:"office",metadata:{category:"office",room_type:"office",enclosed:!0}},STORAGE_AREA:{id:"storage-area",name:"Storage Area",description:"General storage area",type:"room",defaultDimensions:{width:20,height:20,depth:12},defaultColor:"#edf2f7",category:"storage",metadata:{category:"storage",room_type:"storage",enclosed:!1}}},s={WALLS:["EXTERIOR_WALL","INTERIOR_WALL","PARTITION_WALL","FIREWALL"],STRUCTURAL:["STEEL_BEAM","STEEL_COLUMN","CONCRETE_PILLAR"],DOORS:["SINGLE_DOOR","DOUBLE_DOOR","OVERHEAD_DOOR"],WINDOWS:["STANDARD_WINDOW","INDUSTRIAL_WINDOW"],SPECIALIZED:["LOADING_DOCK","OFFICE_SPACE","STORAGE_AREA"]};function r(e){let{position:t,templateId:i,customDimensions:o,customColor:s,customMaterial:r,customMetadata:n}=e;if(!i||!a[i])return console.error(`Invalid template ID: ${i}`),null;let l=a[i];return{type:l.type,position:{x:t.x,y:t.y,z:t.z||0},dimensions:{width:o?.width||l.defaultDimensions.width,height:o?.height||l.defaultDimensions.height,depth:o?.depth||l.defaultDimensions.depth||8},color:s||l.defaultColor,material:r||l.material,metadata:{...l.metadata,...n,created_from_template:i,created_at:new Date().toISOString()}}}function n(e){let t=r(e);return!!t&&o.b.addElement(t).success}function l(e){let t=[],i=[];switch((e.position.x<0||e.position.y<0)&&t.push("Element position cannot be negative"),(e.dimensions.width<=0||e.dimensions.height<=0)&&t.push("Element dimensions must be positive"),e.dimensions.depth&&e.dimensions.depth<=0&&t.push("Element depth must be positive"),e.type){case"wall":e.dimensions.width<1&&e.dimensions.height<1&&i.push("Wall should be at least 1 foot in one dimension");break;case"door":case"fixture":"wood"===e.material&&e.dimensions.depth&&e.dimensions.depth>12&&i.push("Door height seems unusually tall");break;case"window":e.dimensions.depth&&e.dimensions.depth>8&&i.push("Window height seems unusually tall")}return"steel"!==e.material||e.metadata?.load_bearing||i.push("Steel elements are typically load-bearing"),{isValid:0===t.length,errors:t,warnings:i}}function c(e,t={}){let{gridSize:i=1,snapToElements:o=!1,snapTolerance:a=.5}=t;return{x:Math.round(e.x/i)*i,y:Math.round(e.y/i)*i,z:e.z?Math.round(e.z/i)*i:e.z}}function d(e,t){let i={};return t.scale&&(i.dimensions={width:e.dimensions.width*(t.scale.x||1),height:e.dimensions.height*(t.scale.y||1),depth:(e.dimensions.depth||8)*(t.scale.z||1)}),void 0!==t.rotate&&(i.rotation=(e.rotation||0)+t.rotate),t.translate&&(i.position={x:e.position.x+(t.translate.x||0),y:e.position.y+(t.translate.y||0),z:(e.position.z||0)+(t.translate.z||0)}),i}function m(e,t={}){let{count:i=1,spacing:o={x:5,y:5,z:0},pattern:a="linear",gridDimensions:s={rows:2,cols:2}}=t,r=[],{id:n,...l}=e;switch(a){case"linear":for(let t=1;t<=i;t++)r.push({...l,position:{x:e.position.x+(o.x||0)*t,y:e.position.y+(o.y||0)*t,z:(e.position.z||0)+(o.z||0)*t},metadata:{...e.metadata,duplicated_from:e.id,duplicate_index:t}});break;case"grid":let c=s.rows||2,d=s.cols||2;for(let t=0;t<c;t++)for(let i=0;i<d;i++)(0!==t||0!==i)&&r.push({...l,position:{x:e.position.x+(o.x||0)*i,y:e.position.y+(o.y||0)*t,z:e.position.z||0},metadata:{...e.metadata,duplicated_from:e.id,grid_position:{row:t,col:i}}});break;case"circular":let m=Math.max(o.x||5,o.y||5);for(let t=1;t<=i;t++){let o=2*Math.PI*t/i;r.push({...l,position:{x:e.position.x+m*Math.cos(o),y:e.position.y+m*Math.sin(o),z:e.position.z||0},metadata:{...e.metadata,duplicated_from:e.id,circular_index:t,angle:o}})}}return r}function h(e){return e.dimensions.width*e.dimensions.height}function p(e){let t=e.dimensions.depth||8;return e.dimensions.width*e.dimensions.height*t}function u(e,t){let i=t.position.x-e.position.x,o=t.position.y-e.position.y,a=(t.position.z||0)-(e.position.z||0);return Math.sqrt(i*i+o*o+a*a)}function g(e,t){let i=Math.abs(t.position.x-e.position.x),o=Math.abs(t.position.y-e.position.y),a=Math.abs((t.position.z||0)-(e.position.z||0));return o>i&&o>a?{distance:o,type:"vertical",axis:"Y"}:a>i&&a>o?{distance:a,type:"height",axis:"Z"}:{distance:i,type:"horizontal",axis:"X"}}function x(e){return{minX:e.position.x,maxX:e.position.x+e.dimensions.width,minY:e.position.y,maxY:e.position.y+e.dimensions.height,minZ:e.position.z||0,maxZ:(e.position.z||0)+(e.dimensions.depth||8)}}function y(e,t){let i=x(e),o=x(t);return!(i.maxX<=o.minX||o.maxX<=i.minX||i.maxY<=o.minY||o.maxY<=i.minY||i.maxZ<=o.minZ||o.maxZ<=i.minZ)}},8842:(e,t,i)=>{"use strict";i.d(t,{b:()=>l});let o={id:"main-warehouse-building",name:"Warehouse Building - 88' 7/8\" x 198' (rotated)",dimensions:{width:138.75,height:248},elements:[{id:"wall-bottom-left",type:"wall",position:{x:25,y:25,z:0},dimensions:{width:73.625,height:1,depth:12},rotation:0,material:"concrete",color:"#8B7355",metadata:{category:"exterior",material_type:"brick",description:"South wall left segment - west of opening"}},{id:"wall-bottom-right",type:"wall",position:{x:108.625,y:25,z:0},dimensions:{width:4.125,height:1,depth:12},rotation:0,material:"concrete",color:"#8B7355",metadata:{category:"exterior",material_type:"brick",description:'South wall right segment - east of opening (49.5" from east wall)'}},{id:"south-wall-opening",type:"window",position:{x:98.625,y:25,z:0},dimensions:{width:10,height:1,depth:12},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"access",opening_type:"large_opening",description:"12' tall by 10' wide opening on south wall, 49.5\" from east wall"}},{id:"wall-top",type:"wall",position:{x:25,y:222,z:0},dimensions:{width:88.75,height:1,depth:12},rotation:0,material:"concrete",color:"#8B7355",metadata:{category:"exterior",material_type:"brick"}},{id:"wall-left-north",type:"wall",position:{x:25,y:205.573,z:0},dimensions:{width:1,height:16.427,depth:12},rotation:0,material:"concrete",color:"#8B7355",metadata:{category:"exterior",material_type:"brick",description:"West wall north segment - north of opening"}},{id:"wall-left-south",type:"wall",position:{x:25,y:25,z:0},dimensions:{width:1,height:180.573,depth:12},rotation:0,material:"concrete",color:"#8B7355",metadata:{category:"exterior",material_type:"brick",description:"West wall south segment - south of opening"}},{id:"west-wall-opening",type:"window",position:{x:25,y:205.573,z:0},dimensions:{width:1,height:10,depth:10},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"access",opening_type:"walkway",description:"10' tall by 10' wide walkway opening on west wall, 6' 5 1/8\" from north wall"}},{id:"wall-right",type:"wall",position:{x:112.75,y:25,z:0},dimensions:{width:1,height:198,depth:12},rotation:0,material:"concrete",color:"#8B7355",metadata:{category:"exterior",material_type:"brick"}},{id:"steel-beam-north-center",type:"fixture",position:{x:69.375,y:198.2292,z:0},dimensions:{width:.67,height:.67,depth:14.046875},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",beam_type:"I-beam",beam_size:"8_inch",beam_layers:1,load_bearing:!0,description:"14' 9/16\" tall steel I-beam (8 inch) - single layer at center of north wall"}},{id:"steel-beam-second",type:"fixture",position:{x:69.375,y:173.6667,z:0},dimensions:{width:.67,height:.67,depth:14.046875},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",beam_type:"I-beam",beam_size:"8_inch",beam_layers:1,load_bearing:!0,description:"14' 9/16\" tall steel I-beam (8 inch) - single layer, second beam"}},{id:"steel-beam-third",type:"fixture",position:{x:69.375,y:149.1042,z:0},dimensions:{width:.67,height:.67,depth:14.046875},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",beam_type:"I-beam",beam_size:"8_inch",beam_layers:1,load_bearing:!0,description:"14' 9/16\" tall steel I-beam (8 inch) - single layer, third beam"}},{id:"steel-beam-fourth",type:"fixture",position:{x:69.375,y:124.5417,z:0},dimensions:{width:.67,height:.67,depth:14.046875},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",beam_type:"I-beam",beam_size:"8_inch",beam_layers:1,load_bearing:!0,description:"14' 9/16\" tall steel I-beam (8 inch) - single layer, fourth beam"}},{id:"steel-beam-fifth",type:"fixture",position:{x:69.375,y:99.9792,z:0},dimensions:{width:.67,height:.67,depth:14.046875},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",beam_type:"I-beam",beam_size:"8_inch",beam_layers:1,load_bearing:!0,description:"14' 9/16\" tall steel I-beam (8 inch) - single layer, fifth beam"}},{id:"steel-beam-sixth",type:"fixture",position:{x:69.375,y:75.4167,z:0},dimensions:{width:.67,height:.67,depth:14.046875},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",beam_type:"I-beam",beam_size:"8_inch",beam_layers:1,load_bearing:!0,description:"14' 9/16\" tall steel I-beam (8 inch) - single layer, sixth beam"}},{id:"steel-beam-seventh",type:"fixture",position:{x:69.375,y:48.8542,z:0},dimensions:{width:.67,height:.67,depth:14.046875},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",beam_type:"I-beam",beam_size:"8_inch",beam_layers:1,load_bearing:!0,description:"14' 9/16\" tall steel I-beam (8 inch) - single layer, seventh beam (LAST)"}},{id:"room-wall-1",type:"wall",position:{x:81.875,y:208.5209,z:0},dimensions:{width:28.5,height:.375,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_south:"dry-room-south",description:"South dry room north wall - northern boundary (28.5' long x 10.4792' wide)"}},{id:"room-wall-2",type:"wall",position:{x:30.0625,y:173.4792,z:0},dimensions:{width:80.375,height:.375,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_north:2,room_south:3,description:"Room wall 2 - separates Room 2 (north) from Room 3 (south)"}},{id:"room-wall-3",type:"wall",position:{x:30.0625,y:148.9167,z:0},dimensions:{width:80.375,height:.375,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_north:3,room_south:4,description:"Room wall 3 - separates Room 3 (north) from Room 4 (south)"}},{id:"room-wall-4",type:"wall",position:{x:25,y:124.3542,z:0},dimensions:{width:87.75,height:.5,depth:12},rotation:0,material:"concrete",color:"#dc2626",metadata:{category:"fire-safety",material_type:"fire-rated-concrete",load_bearing:!0,fire_rating:"2-hour",extends_to_exterior:!0,crosses_hallways:!0,firewall_marking:"subtle",room_north:4,room_south:5,description:"FIREWALL - Room 5 north wall / Room 4 south wall - extends to exterior walls across hallways"}},{id:"room-wall-5",type:"wall",position:{x:30.0625,y:99.7917,z:0},dimensions:{width:80.375,height:.375,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_north:5,room_south:6,description:"Room wall 5 - separates Room 5 (north) from Room 6 (south)"}},{id:"room-wall-6",type:"wall",position:{x:30.0625,y:75.2292,z:0},dimensions:{width:80.375,height:.375,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_north:6,room_south:7,description:"Room wall 6 - separates Room 6 (north) from Room 7 (south)"}},{id:"room-wall-7",type:"wall",position:{x:30.0625,y:48.6667,z:0},dimensions:{width:80.375,height:.375,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_north:7,room_south:8,description:"Room wall 7 - separates Room 7 (north) from Room 8 (south)"}},{id:"longways-wall-left",type:"wall",position:{x:30.0625,y:29,z:0},dimensions:{width:.375,height:169.0417,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,description:"Left longways wall - 12' high with room openings, shortened to end at room 2's north wall",openings:[{id:"room-8-west-opening",type:"door",position:{x:5.83,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 8 west entrance"}},{id:"room-7-west-opening",type:"door",position:{x:28.95,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 7 west entrance"}},{id:"room-6-west-opening",type:"door",position:{x:54.51,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 6 west entrance"}},{id:"room-5-west-opening",type:"door",position:{x:79.07,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 5 west entrance"}},{id:"room-4-west-opening",type:"door",position:{x:103.64,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 4 west entrance"}},{id:"room-3-west-opening",type:"door",position:{x:128.2,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 3 west entrance"}},{id:"room-2-west-opening",type:"door",position:{x:152.76,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 2 west entrance"}}]}},{id:"longways-wall-right",type:"wall",position:{x:110.375,y:49.0417,z:0},dimensions:{width:.375,height:172.9583,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,description:"Right longways wall - 12' high with room openings, continuous wall to north exterior, 3' from east exterior wall",openings:[{id:"room-7-east-opening",type:"door",position:{x:8.91,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 7 east entrance"}},{id:"room-6-east-opening",type:"door",position:{x:34.47,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 6 east entrance"}},{id:"room-5-east-opening",type:"door",position:{x:59.03,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 5 east entrance"}},{id:"room-4-east-opening",type:"door",position:{x:83.6,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 4 east entrance"}},{id:"room-3-east-opening",type:"door",position:{x:108.16,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 3 east entrance"}},{id:"room-2-east-opening",type:"door",position:{x:132.72,z:0},dimensions:{width:8,height:8},metadata:{doorType:"double",description:"Room 2 east entrance"}}]}},{id:"hallway-wall-south",type:"wall",position:{x:30.0625,y:29,z:0},dimensions:{width:68.5625,height:.375,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_north:8,description:"South hallway wall - northern boundary of Room 8, shortened to end 2' from south wall opening"}},{id:"room-8-closure-wall",type:"wall",position:{x:98.625,y:25,z:0},dimensions:{width:.375,height:23.6667,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,description:"Room 8 closure wall - closes both room 8 and south hallway, connects south exterior wall to room-wall-7 (room 8 north wall)"}},{id:"hallway-wall-north",type:"wall",position:{x:30.0625,y:198.0417,z:0},dimensions:{width:80.3125,height:.375,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_north:"dry-room-south",room_south:2,description:"North hallway wall - separates Room 2 from south dry room (at I-beam position)"}},{id:"room-1-second-divider-wall",type:"wall",position:{x:110.375,y:198.0417,z:0},dimensions:{width:.375,height:10.4792,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_west:"dry-room-south",description:"South dry room east wall - eastern boundary (10.4792' wide)"}},{id:"dry-room-west-cap-wall",type:"wall",position:{x:81.875,y:198.0417,z:0},dimensions:{width:.375,height:10.4792,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_east:"dry-room-south",description:"South dry room west wall - western boundary (28.5' long x 10.4792' wide)"}},{id:"middle-hallway-south-wall",type:"wall",position:{x:81.875,y:211.5209,z:0},dimensions:{width:28.5,height:.375,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_north:"dry-room-north",room_south:"middle-hallway",description:"Middle hallway north wall / North dry room south wall"}},{id:"north-dry-room-west-wall",type:"wall",position:{x:81.875,y:211.5209,z:0},dimensions:{width:.375,height:10.4791,depth:12},rotation:0,material:"concrete",color:"#ffffff",metadata:{category:"room-walls",material_type:"drywall",load_bearing:!1,room_east:"dry-room-north",description:"North dry room west wall - western boundary (28.5' long x 10.4791' wide)"}},{id:"east-hallway-ceiling",type:"fixture",position:{x:110.375,y:29,z:8},dimensions:{width:2.375,height:193,depth:.25},rotation:0,material:"concrete",color:"#f5f5f5",metadata:{category:"ceiling",material_type:"drywall",load_bearing:!1,ceiling_height:8,duct_space_above:4,is_ceiling:!0,description:"East longway hallway ceiling at 8' height, extended to north exterior wall"}},{id:"middle-hallway-ceiling",type:"fixture",position:{x:81.875,y:208.5209,z:8},dimensions:{width:28.5,height:3,depth:.25},rotation:0,material:"concrete",color:"#f5f5f5",metadata:{category:"ceiling",material_type:"drywall",load_bearing:!1,ceiling_height:8,duct_space_above:4,is_ceiling:!0,description:"Middle hallway ceiling at 8' height, 3' wide hallway between dry rooms"}},{id:"support-truss-south",type:"fixture",position:{x:25,y:25,z:12},dimensions:{width:88.75,height:4.8438,depth:.67},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"support_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!0,center_height:14.046875,exterior_height:12,cross_members:"cross_pattern",description:"Support truss over south exterior wall - curved from 12' to 14.046875' center"}},{id:"support-truss-ibeam-1",type:"fixture",position:{x:25,y:198.2292,z:12},dimensions:{width:88.75,height:4.8438,depth:.67},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"support_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!0,center_height:14.046875,exterior_height:12,cross_members:"cross_pattern",aligned_with:"steel-beam-north-center",description:"Support truss over first I-beam (north-center) - curved from 12' to 14.046875' center"}},{id:"support-truss-ibeam-2",type:"fixture",position:{x:25,y:173.6667,z:12},dimensions:{width:88.75,height:4.8438,depth:.67},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"support_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!0,center_height:14.046875,exterior_height:12,cross_members:"cross_pattern",aligned_with:"steel-beam-second",description:"Support truss over second I-beam - curved from 12' to 14.046875' center"}},{id:"support-truss-ibeam-3",type:"fixture",position:{x:25,y:149.1042,z:12},dimensions:{width:88.75,height:4.8438,depth:.67},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"support_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!0,center_height:14.046875,exterior_height:12,cross_members:"cross_pattern",aligned_with:"steel-beam-third",description:"Support truss over third I-beam - curved from 12' to 14.046875' center"}},{id:"support-truss-ibeam-4",type:"fixture",position:{x:25,y:124.5417,z:12},dimensions:{width:88.75,height:4.8438,depth:.67},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"support_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!0,center_height:14.046875,exterior_height:12,cross_members:"cross_pattern",aligned_with:"steel-beam-fourth",description:"Support truss over fourth I-beam - curved from 12' to 14.046875' center"}},{id:"support-truss-ibeam-5",type:"fixture",position:{x:25,y:99.9792,z:12},dimensions:{width:88.75,height:4.8438,depth:.67},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"support_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!0,center_height:14.046875,exterior_height:12,cross_members:"cross_pattern",aligned_with:"steel-beam-fifth",description:"Support truss over fifth I-beam - curved from 12' to 14.046875' center"}},{id:"support-truss-ibeam-6",type:"fixture",position:{x:25,y:75.4167,z:12},dimensions:{width:88.75,height:4.8438,depth:.67},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"support_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!0,center_height:14.046875,exterior_height:12,cross_members:"cross_pattern",aligned_with:"steel-beam-sixth",description:"Support truss over sixth I-beam - curved from 12' to 14.046875' center"}},{id:"support-truss-ibeam-7",type:"fixture",position:{x:25,y:48.8542,z:12},dimensions:{width:88.75,height:4.8438,depth:.67},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"support_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!0,center_height:14.046875,exterior_height:12,cross_members:"cross_pattern",aligned_with:"steel-beam-seventh",description:"Support truss over seventh I-beam - curved from 12' to 14.046875' center"}},{id:"support-truss-north",type:"fixture",position:{x:25,y:222,z:12},dimensions:{width:88.75,height:4.8438,depth:.67},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"support_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!0,center_height:14.046875,exterior_height:12,cross_members:"cross_pattern",description:"Support truss over north exterior wall - curved from 12' to 14.046875' center"}},{id:"longitudinal-truss-west",type:"fixture",position:{x:25,y:25,z:12},dimensions:{width:1,height:198,depth:4.8438},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"longitudinal_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!1,cross_members:"cross_pattern",description:"Longitudinal truss along west wall - 198' long, connects all cross trusses"}},{id:"longitudinal-truss-east",type:"fixture",position:{x:112.75,y:25,z:12},dimensions:{width:1,height:198,depth:4.8438},rotation:0,material:"steel",color:"#2c3e50",metadata:{category:"structural",truss_type:"longitudinal_truss",truss_size:"4_10_1_16_inch",beam_thickness:"8_inch",load_bearing:!0,curved_profile:!1,cross_members:"cross_pattern",description:"Longitudinal truss along east wall - 198' long, connects all cross trusses"}},{id:"ibc-tote-bottom-1",type:"fixture",position:{x:69.375,y:198.4167,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,material_tank:"HDPE",material_cage:"steel",stack_level:"bottom",description:"IBC Tote Bottom Stack #1 - 330 gallon capacity"}},{id:"ibc-tote-bottom-2",type:"fixture",position:{x:65.292,y:198.4167,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"bottom",description:"IBC Tote Bottom Stack #2"}},{id:"ibc-tote-bottom-3",type:"fixture",position:{x:61.209,y:198.4167,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"bottom",description:"IBC Tote Bottom Stack #3"}},{id:"ibc-tote-bottom-4",type:"fixture",position:{x:57.126,y:198.4167,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"bottom",description:"IBC Tote Bottom Stack #4"}},{id:"ibc-tote-bottom-5",type:"fixture",position:{x:53.043,y:198.4167,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"bottom",description:"IBC Tote Bottom Stack #5"}},{id:"ibc-tote-bottom-6",type:"fixture",position:{x:48.96,y:198.4167,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"bottom",description:"IBC Tote Bottom Stack #6"}},{id:"ibc-tote-bottom-7",type:"fixture",position:{x:44.877,y:198.4167,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"bottom",description:"IBC Tote Bottom Stack #7"}},{id:"ibc-tote-top-1",type:"fixture",position:{x:69.375,y:198.4167,z:5.83},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"top",liquid_level:.7,description:"IBC Tote Top Stack #1 - 330 gallon capacity"}},{id:"ibc-tote-top-2",type:"fixture",position:{x:65.292,y:198.4167,z:5.83},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"top",description:"IBC Tote Top Stack #2"}},{id:"ibc-tote-top-3",type:"fixture",position:{x:61.209,y:198.4167,z:5.83},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"top",liquid_level:.5,description:"IBC Tote Top Stack #3"}},{id:"ibc-tote-top-4",type:"fixture",position:{x:57.126,y:198.4167,z:5.83},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"top",description:"IBC Tote Top Stack #4"}},{id:"ibc-tote-top-5",type:"fixture",position:{x:53.043,y:198.4167,z:5.83},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"top",liquid_level:.8,description:"IBC Tote Top Stack #5"}},{id:"ibc-tote-top-6",type:"fixture",position:{x:48.96,y:198.4167,z:5.83},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"top",description:"IBC Tote Top Stack #6"}},{id:"ibc-tote-top-7",type:"fixture",position:{x:44.877,y:198.4167,z:5.83},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"ibc_tote",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,stack_level:"top",weathered:!0,description:"IBC Tote Top Stack #7"}},{id:"ibc-tote-room7-1",type:"fixture",position:{x:32,y:60,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"composite",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,material_tank:"HDPE",material_cage:"steel",room:7,description:"IBC Tote 1 - 330 gallon capacity"}},{id:"ibc-tote-room7-2",type:"fixture",position:{x:36.5,y:60,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"composite",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,material_tank:"HDPE",material_cage:"steel",room:7,description:"IBC Tote 2 - 330 gallon capacity"}},{id:"ibc-tote-room7-3",type:"fixture",position:{x:41,y:60,z:0},dimensions:{width:4,height:3.33,depth:3.83},rotation:0,material:"composite",color:"#f0f0f0",metadata:{category:"storage",equipment_type:"ibc_tote",capacity_gallons:330,material_tank:"HDPE",material_cage:"steel",room:7,description:"IBC Tote 3 - 330 gallon capacity"}},{id:"norwesco-tank-1",type:"fixture",position:{x:38,y:198.4167,z:0},dimensions:{width:5.33,height:5.33,depth:6.67},rotation:0,material:"norwesco_tank",color:"#e8e8e8",metadata:{category:"storage",equipment_type:"norwesco_tank",model_number:"40152",capacity_gallons:1e3,diameter_inches:64,height_inches:80,material_tank:"polyethylene",manufacturer:"Norwesco",description:"Norwesco 40152 - 1000 Gallon Vertical Storage Tank #1"}},{id:"norwesco-tank-2",type:"fixture",position:{x:31.5,y:198.4167,z:0},dimensions:{width:5.33,height:5.33,depth:6.67},rotation:0,material:"norwesco_tank",color:"#e8e8e8",metadata:{category:"storage",equipment_type:"norwesco_tank",model_number:"40152",capacity_gallons:1e3,diameter_inches:64,height_inches:80,material_tank:"polyethylene",manufacturer:"Norwesco",description:"Norwesco 40152 - 1000 Gallon Vertical Storage Tank #2"}}],scale:1,units:"feet",createdAt:new Date,updatedAt:new Date};function a(e){let t=[],i=[];(!e.dimensions||e.dimensions.width<=0||e.dimensions.height<=0)&&t.push("Model must have valid dimensions");let o=e.elements||[];new Set(o.map(e=>e.id)).size!==o.length&&t.push("All elements must have unique IDs");let a=o.filter(e=>"steel"===e.material&&"fixture"===e.type);o.length>0&&0===a.length&&i.push("No steel beams found - structural integrity may be compromised");let s=o.filter(e=>"wall"===e.type&&e.metadata?.category==="exterior");return o.length>0&&s.length<4&&i.push("Model should have at least 4 exterior walls for enclosure"),o.forEach(e=>{e.position&&"number"==typeof e.position.x&&"number"==typeof e.position.y||t.push(`Element ${e.id} has invalid position`),(!e.dimensions||e.dimensions.width<=0||e.dimensions.height<=0)&&t.push(`Element ${e.id} has invalid dimensions`)}),{isValid:0===t.length,errors:t,warnings:i}}function s(e){return JSON.parse(JSON.stringify(e))}let r={EMPTY_1000:{id:"empty-warehouse-1000",name:"Empty 1000x1000 Warehouse",dimensions:{width:1e3,height:1e3},elements:[],scale:1,units:"feet",createdAt:new Date,updatedAt:new Date},EMPTY_500:{id:"empty-warehouse-500",name:"Empty 500x500 Warehouse",dimensions:{width:500,height:500},elements:[],scale:1,units:"feet",createdAt:new Date,updatedAt:new Date},BASIC_100:{id:"basic-warehouse-100",name:"Basic 100x100 Warehouse",dimensions:{width:100,height:100},elements:[{id:"wall-bottom",type:"wall",position:{x:0,y:0,z:0},dimensions:{width:100,height:1,depth:20},rotation:0,material:"concrete",color:"#4a5568",metadata:{category:"exterior",material_type:"concrete"}},{id:"wall-top",type:"wall",position:{x:0,y:99,z:0},dimensions:{width:100,height:1,depth:20},rotation:0,material:"concrete",color:"#4a5568",metadata:{category:"exterior",material_type:"concrete"}},{id:"wall-left",type:"wall",position:{x:0,y:0,z:0},dimensions:{width:1,height:100,depth:20},rotation:0,material:"concrete",color:"#4a5568",metadata:{category:"exterior",material_type:"concrete"}},{id:"wall-right",type:"wall",position:{x:99,y:0,z:0},dimensions:{width:1,height:100,depth:20},rotation:0,material:"concrete",color:"#4a5568",metadata:{category:"exterior",material_type:"concrete"}}],scale:1,units:"feet",createdAt:new Date,updatedAt:new Date}};class n{constructor(){this.models=new Map,this.currentModelId=null,this.undoStack=[],this.redoStack=[],this.maxUndoSteps=50,this.models.set(o.id,o),this.currentModelId=o.id}createModel(e="EMPTY",t){try{let i;if("CUSTOM"===e&&t)i={id:t.id||`warehouse-${Date.now()}`,name:t.name||"New Warehouse",dimensions:t.dimensions||{width:100,height:50},elements:t.elements||[],scale:t.scale||1,units:t.units||"feet",createdAt:new Date,updatedAt:new Date};else{let t=r["CUSTOM"===e?"EMPTY_1000":({EMPTY:"EMPTY_1000",BASIC:"BASIC_100"})[e]||"EMPTY_1000"];(i=s({...t,elements:[...t.elements]})).id=`warehouse-${Date.now()}`,i.createdAt=new Date,i.updatedAt=new Date}let o=a(i);return this.models.set(i.id,i),{success:!0,data:i,validation:o}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to create model"}}}getModel(e){let t=this.models.get(e);return t?{success:!0,data:s(t)}:{success:!1,error:`Model with ID '${e}' not found`}}getCurrentModel(){return this.currentModelId?this.getModel(this.currentModelId):{success:!1,error:"No current model set"}}setCurrentModel(e){return this.models.has(e)?(this.currentModelId=e,this.clearUndoRedo(),this.getCurrentModel()):{success:!1,error:`Model with ID '${e}' not found`}}updateModel(e,t){let i=this.models.get(e);if(!i)return{success:!1,error:`Model with ID '${e}' not found`};try{e===this.currentModelId&&this.saveUndoState(i);let o={...{...i,...t,id:i.id,createdAt:i.createdAt},updatedAt:new Date},r=a(o);return this.models.set(e,o),{success:!0,data:s(o),validation:r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to update model"}}}deleteModel(e){return e===o.id?{success:!1,error:"Cannot delete the main warehouse model"}:this.models.has(e)?(this.models.delete(e),this.currentModelId===e&&(this.currentModelId=o.id,this.clearUndoRedo()),{success:!0,data:!0}):{success:!1,error:`Model with ID '${e}' not found`}}listModels(){return{success:!0,data:Array.from(this.models.values()).map(e=>({id:e.id,name:e.name,updatedAt:e.updatedAt})).sort((e,t)=>t.updatedAt.getTime()-e.updatedAt.getTime())}}addElement(e){console.log("ModelManager: Adding element",e),console.log("ModelManager: Current model ID",this.currentModelId);let t=this.getCurrentModel();if(console.log("ModelManager: Current model result",t),!t.success||!t.data)return console.error("ModelManager: No current model available"),{success:!1,error:t.error||"No current model available"};try{let i={...e,id:`element-${Date.now()}-${Math.random().toString(36).substr(2,9)}`};console.log("ModelManager: Created new element with ID",i.id);let o=[...t.data.elements,i];console.log("ModelManager: Updated elements array length",o.length);let a=this.updateModel(this.currentModelId,{elements:o});if(console.log("ModelManager: Update model result",a),!a.success)return{success:!1,error:a.error||"Failed to update model"};return{success:!0,data:i,validation:a.validation}}catch(e){return console.error("ModelManager: Error adding element",e),{success:!1,error:e instanceof Error?e.message:"Failed to add element"}}}updateElement(e,t){let i=this.getCurrentModel();if(!i.success||!i.data)return{success:!1,error:i.error||"No current model available"};try{let o=i.data.elements.findIndex(t=>t.id===e);if(-1===o)return{success:!1,error:`Element with ID '${e}' not found`};let a=i.data.elements[o],s={...a,position:{...a.position,...t.position},dimensions:{...a.dimensions,...t.dimensions},color:t.color??a.color,material:t.material??a.material,rotation:t.rotation??a.rotation,metadata:t.metadata?{...a.metadata,...t.metadata}:a.metadata},r=[...i.data.elements];r[o]=s;let n=this.updateModel(this.currentModelId,{elements:r});if(!n.success)return{success:!1,error:n.error||"Failed to update model"};return{success:!0,data:s,validation:n.validation}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to update element"}}}removeElement(e){let t=this.getCurrentModel();if(!t.success||!t.data)return{success:!1,error:t.error||"No current model available"};try{if(!t.data.elements.some(t=>t.id===e))return{success:!1,error:`Element with ID '${e}' not found`};let i=t.data.elements.filter(t=>t.id!==e),o=this.updateModel(this.currentModelId,{elements:i});if(!o.success)return{success:!1,error:o.error||"Failed to update model"};return{success:!0,data:!0,validation:o.validation}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to remove element"}}}getElement(e){let t=this.getCurrentModel();if(!t.success||!t.data)return{success:!1,error:t.error||"No current model available"};let i=t.data.elements.find(t=>t.id===e);return i?{success:!0,data:{...i}}:{success:!1,error:`Element with ID '${e}' not found`}}duplicateElement(e,t={x:5,y:5}){let i=this.getElement(e);if(!i.success||!i.data)return i;let o=i.data,{id:a,...s}={...o,position:{x:o.position.x+(t.x||0),y:o.position.y+(t.y||0),z:(o.position.z||0)+(t.z||0)}};return this.addElement(s)}saveUndoState(e){this.undoStack.push(s(e)),this.undoStack.length>this.maxUndoSteps&&this.undoStack.shift(),this.redoStack=[]}undo(){if(!this.currentModelId)return{success:!1,error:"No current model set"};if(0===this.undoStack.length)return{success:!1,error:"Nothing to undo"};let e=this.models.get(this.currentModelId);e&&this.redoStack.push(s(e));let t=this.undoStack.pop();return this.models.set(this.currentModelId,t),{success:!0,data:s(t)}}redo(){if(!this.currentModelId)return{success:!1,error:"No current model set"};if(0===this.redoStack.length)return{success:!1,error:"Nothing to redo"};let e=this.models.get(this.currentModelId);e&&this.undoStack.push(s(e));let t=this.redoStack.pop();return this.models.set(this.currentModelId,t),{success:!0,data:s(t)}}clearUndoRedo(){this.undoStack=[],this.redoStack=[]}getUndoRedoStatus(){return{canUndo:this.undoStack.length>0,canRedo:this.redoStack.length>0,undoCount:this.undoStack.length,redoCount:this.redoStack.length}}validateCurrentModel(){let e=this.getCurrentModel();return e.success&&e.data?{success:!0,data:a(e.data)}:{success:!1,error:e.error||"No current model available"}}exportModel(e){let t=this.getModel(e);if(!t.success||!t.data)return{success:!1,error:t.error||"Model not found"};try{let e=JSON.stringify(t.data,null,2);return{success:!0,data:e}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to export model"}}}importModel(e){try{let t=JSON.parse(e);if(!t.id||!t.name||!t.dimensions||!Array.isArray(t.elements))return{success:!1,error:"Invalid model format"};let i={...t,id:`imported-${Date.now()}`,createdAt:new Date,updatedAt:new Date},o=a(i);return this.models.set(i.id,i),{success:!0,data:i,validation:o}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to import model"}}}getModelStats(e){let t=e||this.currentModelId;if(!t)return{success:!1,error:"No model specified"};let i=this.getModel(t);if(!i.success||!i.data)return i;let o=i.data,a=o.elements,s={},r={},n=new Set;a.forEach(e=>{s[e.type]=(s[e.type]||0)+1;let t=e.metadata?.category||"uncategorized";r[t]=(r[t]||0)+1,e.metadata?.room&&n.add(e.metadata.room)});let l=o.dimensions.width*o.dimensions.height;return{success:!0,data:{totalElements:a.length,elementsByType:s,elementsByCategory:r,totalArea:l,rooms:Array.from(n).sort()}}}}let l=new n},4314:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SimpleGuideSystem:()=>o});class o{findGuides(e,t){let i=[],o=new Set,a=new Set,s=e.position.x,r=e.position.x+e.dimensions.width,n=e.position.y,l=e.position.y+e.dimensions.height,c=e.position.x+e.dimensions.width/2,d=e.position.y+e.dimensions.height/2;for(let e of t){if(e.metadata?.isPreview)continue;let t=e.position.x,m=e.position.x+e.dimensions.width,h=e.position.y,p=e.position.y+e.dimensions.height,u=e.position.x+e.dimensions.width/2,g=e.position.y+e.dimensions.height/2;if(Math.abs(c-u)<this.tolerance){let t=Math.round(10*u)/10;o.has(t)||(o.add(t),i.push({type:"vertical",position:u,color:"#ff6b6b",elements:[e.id]}))}if(Math.abs(s-t)<this.tolerance){let a=Math.round(10*t)/10;o.has(a)||(o.add(a),i.push({type:"vertical",position:t,color:"#4ecdc4",elements:[e.id]}))}if(Math.abs(r-m)<this.tolerance){let t=Math.round(10*m)/10;o.has(t)||(o.add(t),i.push({type:"vertical",position:m,color:"#4ecdc4",elements:[e.id]}))}if(Math.abs(d-g)<this.tolerance){let t=Math.round(10*g)/10;a.has(t)||(a.add(t),i.push({type:"horizontal",position:g,color:"#ff6b6b",elements:[e.id]}))}if(Math.abs(n-h)<this.tolerance){let t=Math.round(10*h)/10;a.has(t)||(a.add(t),i.push({type:"horizontal",position:h,color:"#4ecdc4",elements:[e.id]}))}if(Math.abs(l-p)<this.tolerance){let t=Math.round(10*p)/10;a.has(t)||(a.add(t),i.push({type:"horizontal",position:p,color:"#4ecdc4",elements:[e.id]}))}}return[...i.filter(e=>"vertical"===e.type).slice(0,3),...i.filter(e=>"horizontal"===e.type).slice(0,3)]}getSnapPosition(e,t){let i=null,o=null,a=e.position.x+e.dimensions.width/2,s=e.position.y+e.dimensions.height/2;for(let o of t.filter(e=>"vertical"===e.type)){let t=Math.abs(e.position.x-o.position),s=Math.abs(e.position.x+e.dimensions.width-o.position);if(Math.abs(a-o.position)<this.tolerance){i=o.position-e.dimensions.width/2;break}if(t<this.tolerance){i=o.position;break}if(s<this.tolerance){i=o.position-e.dimensions.width;break}}for(let i of t.filter(e=>"horizontal"===e.type)){let t=Math.abs(e.position.y-i.position),a=Math.abs(e.position.y+e.dimensions.height-i.position);if(Math.abs(s-i.position)<this.tolerance){o=i.position-e.dimensions.height/2;break}if(t<this.tolerance){o=i.position;break}if(a<this.tolerance){o=i.position-e.dimensions.height;break}}return null!==i||null!==o?{x:null!==i?i:e.position.x,y:null!==o?o:e.position.y,z:e.position.z}:null}constructor(){this.tolerance=1}}},4122:(e,t,i)=>{"use strict";i.r(t),i.d(t,{WallExpander:()=>o});class o{static expandWall(e,t,i,o,a){console.log("\uD83D\uDD27 Expanding wall:",{wallPosition:e,wallDimensions:t,wallRotation:i});let s=(180*i/Math.PI%360+360)%360,r=s>45&&s<135||s>225&&s<315;console.log("\uD83D\uDCD0 Wall orientation:",{normalizedRotation:s,isVertical:r});let n={x:e.x,y:e.y},l={x:e.x+t.width,y:e.y+t.height},c={x:(n.x+l.x)/2,y:(n.y+l.y)/2},d={...e},m={...t},h=[];if(r){let e=this.findNearestObstacle(c,"up",o,a),t=this.findNearestObstacle(c,"down",o,a);console.log("\uD83D\uDCCF Vertical expansion:",{expandUp:e,expandDown:t}),d.y=t.position,m.height=e.position-t.position,h.push(...e.hitElements,...t.hitElements)}else{let e=this.findNearestObstacle(c,"left",o,a),t=this.findNearestObstacle(c,"right",o,a);console.log("\uD83D\uDCCF Horizontal expansion:",{expandLeft:e,expandRight:t}),d.x=e.position,m.width=t.position-e.position,h.push(...e.hitElements,...t.hitElements)}return{newDimensions:m,newPosition:d,hitElements:h,expansionDirection:r?"vertical":"horizontal"}}static findNearestObstacle(e,t,i,o){let a;let s=[];switch(t){case"up":a=o.height;break;case"down":case"left":a=0;break;case"right":a=o.width}for(let o of i){if("wall"!==o.type||o.metadata?.isPreview)continue;let i={x:o.position.x,y:o.position.y},r={x:o.position.x+o.dimensions.width,y:o.position.y+o.dimensions.height},n=null;switch(t){case"up":i.x<=e.x&&r.x>=e.x&&i.y>e.y&&i.y<a&&(n=i.y);break;case"down":i.x<=e.x&&r.x>=e.x&&r.y<e.y&&r.y>a&&(n=r.y);break;case"left":i.y<=e.y&&r.y>=e.y&&r.x<e.x&&r.x>a&&(n=r.x);break;case"right":i.y<=e.y&&r.y>=e.y&&i.x>e.x&&i.x<a&&(n=i.x)}null!==n&&(a=n,s.length=0,s.push(o))}return{position:a,hitElements:s}}}},3267:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let o=i(9694);i(5344),i(3729);let a=o._(i(546));function s(e,t){let i={loading:e=>{let{error:t,isLoading:i,pastDelay:o}=e;return null}};return"function"==typeof e&&(i.loader=e),(0,a.default)({...i,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8354:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let o=i(3689);function a(e){let{reason:t,children:i}=e;throw new o.BailoutToCSRError(t)}},546:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let o=i(5344),a=i(3729),s=i(8354);function r(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let n={loader:()=>Promise.resolve(r(()=>null)),loading:null,ssr:!0},l=function(e){let t={...n,...e},i=(0,a.lazy)(()=>t.loader().then(r)),l=t.loading;function c(e){let r=l?(0,o.jsx)(l,{isLoading:!0,pastDelay:!0,error:null}):null,n=t.ssr?(0,o.jsx)(i,{...e}):(0,o.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,o.jsx)(i,{...e})});return(0,o.jsx)(a.Suspense,{fallback:r,children:n})}return c.displayName="LoadableComponent",c}},80:(e,t,i)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=i(3729);"function"==typeof Object.is&&Object.is,o.useState,o.useEffect,o.useLayoutEffect,o.useDebugValue,t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:function(e,t){return t()}},7986:(e,t,i)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=i(3729),a=i(8145),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=a.useSyncExternalStore,n=o.useRef,l=o.useEffect,c=o.useMemo,d=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,i,o,a){var m=n(null);if(null===m.current){var h={hasValue:!1,value:null};m.current=h}else h=m.current;var p=r(e,(m=c(function(){function e(e){if(!l){if(l=!0,r=e,e=o(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return n=t}return n=e}if(t=n,s(r,e))return t;var i=o(e);return void 0!==a&&a(t,i)?(r=e,t):(r=e,n=i)}var r,n,l=!1,c=void 0===i?null:i;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,i,o,a]))[0],m[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),d(p),p}},8145:(e,t,i)=>{"use strict";e.exports=i(80)},4657:(e,t,i)=>{"use strict";e.exports=i(7986)},2917:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n,metadata:()=>r});var o=i(5036),a=i(8592),s=i.n(a);i(7272);let r={title:"WarehouseCAD - 3D Floorplan Designer",description:"Professional warehouse and floorplan design tool with Three.js rendering"};function n({children:e}){return o.jsx("html",{lang:"en",children:o.jsx("body",{className:s().className,children:o.jsx("div",{className:"min-h-screen bg-gray-700",children:e})})})}},751:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>s,__esModule:()=>a,default:()=>r});let o=(0,i(6843).createProxy)(String.raw`/Users/whale/Desktop/WarehouseCAD/app/page.tsx`),{__esModule:a,$$typeof:s}=o,r=o.default},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),o=t.X(0,[429],()=>i(9496));module.exports=o})();